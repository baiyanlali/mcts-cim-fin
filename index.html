<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags for IEEE Xplore immersive article -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description"
          content="An interactive article on using genetic algorithms to solve the 8-Queens problem. Learn how the choice of representation and operators affects your genetic algorithm.">
    <meta charset="utf8">
    <title>Playing with Monte-Carlo Tree Search
    </title>

    <!-- Stylesheet for IEEE Xplore immersive article -->
    <link rel="stylesheet" href="fonts/stylesheet.css">
    <link rel="stylesheet" href="css/style.css">


    <script type="text/javascript" src="./jquery-3.5.1.js"></script>


    <script src="./p5.min.js"></script>
    <script src="./tween.umd.js"></script>

    <script src="./mcts-viz/draw_tree.js"></script>
    <script src="./mcts-viz/lib/tree.js"></script>
    <script src="./mcts-viz/interactive.js"></script>
    <script type="module" src="./mcts-viz/tree_vis.js"></script>
    <script src="./mcts-viz/lib/tictactoe.js"></script>
    <script src="./mcts-viz/lib/mcts.js"></script>
    <script type="module" src="./mcts-viz/sketch.js"></script>
    <script src="./sokoban/SokobanRepresentation.js"></script>
    <script src="./mcts-viz/TTTRepresentation.js"></script>


    <script type="module" src="./katex.mjs"></script>
    <script src="./katex.min.js"></script>
    <link rel="stylesheet" href="./katex.min.css">
    <script type="module">
        import renderMathInElement from "./auto-render.mjs";

        renderMathInElement(document.body, {
            // customised options
            // • auto-render specific keys, e.g.:
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false},
                {left: '\\(', right: '\\)', display: false},
                {left: '\\[', right: '\\]', display: true}
            ],
            // • rendering keys, e.g.:
            throwOnError: false
        });
    </script>


    <script src="./pseudocode.min.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="pseudocode.min.css">
    <link rel="stylesheet" type="text/css" href="interactive.css">

    <script type="text/json">
    {
      "katex":{
        "delimiters":[
          {"left": "$$", "right": "$$", "display": true},
          {"left": "$", "right": "$", "display": false}
        ]
      }
    }


    </script>

</head>

<body>
<!-- Article with large top spacing -->
<article class="mt-lg">
    <header>
        <!-- Page container -->
        <div class="container">
            <!-- Page title -->
            <h1>
                Playing with Monte-Carlo Tree Search
            </h1>
            <!-- Subheading -->
            <p class="subhead">
                An interactive article providing an accessible explanation of how Monte-Carlo Tree Search (MCTS) works.
                Tic-Tac-Toe and Sokoban will be provided to show the procedure of MCTS.
            </p>
            <!-- Header info general wrapper -->
            <div class="header-info">
                <!-- Header left info box -->
                <div class="header-left box">
                    <!-- Header authors section -->
                    <div class="header-authors">
                        <h2>Authors</h2>
                        <ul>
                            <li>Yunlong Zhao | Southern University of Science and Technology</li>
                            <li>Chengpeng Hu | Southern University of Science and Technology</li>
                            <li>Jialin Liu | Southern University of Science and Technology</li>
                        </ul>
                    </div>
                    <!-- Published info section -->
                    <div class="header-published">
                        <h2>Published</h2>
                        <p>Dec. 1, 2023</p>
                    </div>
                </div>
                <!-- Header legend section -->
                <div class="header-legend">
                    <svg class="click-icon" data-name="Click"
                         xmlns="http://www.w3.org/2000/svg" viewBox="0 0 83.62 122.88">
                        <title>Click</title>
                        <path
                                d="M40.59,14.63a3.36,3.36,0,0,1-1,2.39l0,0a3.39,3.39,0,0,1-4.77,0,3.42,3.42,0,0,1-1-2.4V3.39A3.4,3.4,0,0,1,37.2,0a3.34,3.34,0,0,1,2.39,1,3.39,3.39,0,0,1,1,2.4V14.63Zm25,76.65a1.89,1.89,0,0,1,3.77,0V99.9a1.89,1.89,0,1,1-3.77,0V91.28ZM54.46,87.47a1.89,1.89,0,0,1,3.77,0V99.9a1.89,1.89,0,1,1-3.77,0V87.47Zm-28-7.63a1.92,1.92,0,0,1-.35-.23q-5.24-4.24-10.44-8.53a8.36,8.36,0,0,0-3.57-1.79,3.54,3.54,0,0,0-2,.09A2,2,0,0,0,9,70.49a6.9,6.9,0,0,0-.4,3.24,12.47,12.47,0,0,0,1.11,4,26.49,26.49,0,0,0,2.92,4.94l17.68,26.74a2.37,2.37,0,0,1,.36,1,15.28,15.28,0,0,0,1.87,6.4,2.89,2.89,0,0,0,2.57,1.46c9,0,18.62-.34,27.53,0a8.33,8.33,0,0,0,4.69-1.51,15,15,0,0,0,4.29-5l.34-.57c3.4-5.87,6.71-11.57,7-18.33L78.85,85l0-.33,0-1.84c.06-5.74.16-14.54-4.62-15.4H71.14c.09,2.46,0,5-.18,7.3-.08,1.36-.15,2.63-.15,3.79a2.31,2.31,0,1,1-4.62,0c0-1.1.08-2.52.17-4,.32-5.73.75-13.38-3.24-14.14h-3a2.2,2.2,0,0,1-.58-.07,69.07,69.07,0,0,1-.13,8.29c-.07,1.36-.15,2.63-.15,3.79a2.31,2.31,0,1,1-4.61,0c0-1.1.08-2.52.16-4,.33-5.73.76-13.38-3.24-14.14h-3a2,2,0,0,1-.6-.08V66a2.31,2.31,0,1,1-4.61,0V42c0-4-1.64-6.55-3.73-7.61a5.32,5.32,0,0,0-4.71-.06l-.1.06c-2.07,1-3.69,3.59-3.69,7.7v42a2.31,2.31,0,1,1-4.62,0V79.84Zm44.14-17a2.49,2.49,0,0,1,.61-.08h3.19a2.33,2.33,0,0,1,.53.06c8.73,1.4,8.61,12.65,8.52,20,0,3.4.14,6.78.18,10.17-.39,7.91-4,14.1-7.67,20.47l-.32.55A19.49,19.49,0,0,1,70,120.55a12.88,12.88,0,0,1-7.29,2.32H35.17a7.23,7.23,0,0,1-6.44-3.5,19,19,0,0,1-2.56-7.88L8.94,85.42A31,31,0,0,1,5.5,79.58,16.88,16.88,0,0,1,4,74a11.42,11.42,0,0,1,.8-5.42,6.54,6.54,0,0,1,3.55-3.49A8.05,8.05,0,0,1,13,64.76a13.19,13.19,0,0,1,5.61,2.77L26.45,74V42.09c0-6.1,2.73-10,6.22-11.82l.15-.06a9.81,9.81,0,0,1,4.33-1,10,10,0,0,1,4.49,1.07C45.16,32.06,47.91,36,47.91,42v7.6a2.41,2.41,0,0,1,.6-.08H51.7a2.33,2.33,0,0,1,.53.06c3.82.61,5.73,3.16,6.63,6.47a2.25,2.25,0,0,1,1.23-.36h3.18a2.26,2.26,0,0,1,.53.06c4.07.65,6,3.49,6.79,7.11ZM14.63,37A3.33,3.33,0,0,1,17,38a3.39,3.39,0,0,1-2.39,5.79H3.39a3.36,3.36,0,0,1-2.39-1A3.4,3.4,0,0,1,3.39,37ZM23,20.55a3.39,3.39,0,0,1-2.4,5.79,3.4,3.4,0,0,1-2.4-1l-7.91-7.94a3.42,3.42,0,0,1-1-2.4,3.39,3.39,0,0,1,5.79-2.4L23,20.55ZM59.2,43.81a3.41,3.41,0,0,1-3.4-3.4A3.41,3.41,0,0,1,59.2,37H70.43a3.35,3.35,0,0,1,2.4,1,3.4,3.4,0,0,1-2.4,5.79ZM55.62,24.74a3.39,3.39,0,0,1-4.8-4.8l7.91-8a3.39,3.39,0,0,1,4.8,4.8l-7.91,8Z"/>
                    </svg>
                    <p>Indicates interactive elements</p>
                </div>
            </div>
            <!-- Box of anchored links -->
            <div class="contents box">
                <h2>Contents:</h2>
                <ul>
                    <li>
                        <a href="#introduction">Introduction</a>
                        <span class="separator">&nbsp;&nbsp;|&nbsp;&nbsp;</span>
                    </li>
                    <li>
                        <a href="#games">Games</a>
                        <span class="separator">&nbsp;&nbsp;|&nbsp;&nbsp;</span>
                    </li>
                    <li>
                        <a href="#algorithm">Algorithm</a>
                        <span class="separator">&nbsp;&nbsp;|&nbsp;&nbsp;</span>
                    </li>
                    <li>
                        <a href="#practise">Practise</a>
                        <span class="separator">&nbsp;&nbsp;|&nbsp;&nbsp;</span>
                    </li>
                    <li>
                        <a href="#conclusion">Conclusion</a>
                    </li>
                </ul>
            </div>
        </div>
    </header>

    <!-- Content container with large top spacing -->
    <div class="container mt-lg">
        <!-- Anchor ID -->
        <section id="introduction">
            <!-- Section title -->
            <h2>I. Introduction</h2>
            <p>
                Monte-Carlo Tree Search (MCTS) is a tree-based policy that aims to achieve optimal performance in
                solving sequential decision problems [<a href="#browne2012survey">1</a>].
                By utilizing random sampling, a game tree is constructed to identify the optimal action at each state.
                <span class="modified_text">Because of few</span> requirements for domain knowledge and its simplicity,
                MCTS has achieved significant
                success in various domains, such as Go [<a href="#silver2017mastering">2</a>], video games [<a
                    href="#perez2016general">3</a>], and chemical synthesis [<a href="#segler2018planning">4</a>].
            </p>
            <p>
                MCTS combines the concepts of tree search and reinforcement learning to address situations where local
                optimal actions may not lead to global optimal performance.
                The four core components of MCTS are <i>Selection</i>, <i>Expansion</i>, <i>Simulation</i>, and <i>Backpropagation</i>.
                The basic procedure of MCTS involves building a tree with nodes that represent visited states and
                selecting the node with the highest probability of reaching an optimal outcome.
                The selected node is then expanded according to the available action space.
                <span class="modified_text">Once a simulation terminates,</span> the results of the simulation are
                propagated back to update the statistics of the nodes on the trajectory.
                MCTS addresses the exploration-exploitation dilemma with specific selection strategies, such as the
                upper confidence bound (UCB) [<a href="#kocsis2006bandit">5</a>]
                , that balance exploitation and exploration within a given computational budget.
            </p>

            <p>
                In this paper, we introduce the underlying mechanism of MCTS and provide corresponding immersive
                interaction for two representative games: Tic-Tac-Toe, a two-player competitive game and Sokoban, a
                single-player puzzle game. The paper is organised as follows. Section <a href="#games">Games</a>
                introduces the Tic-Tac-Tow and Sokoban, Section <a href="#algorithm">Algorithm</a> provides the details
                of the MCTS algorithm, Section <a href="#practise">Practise</a> gives an interactive environment for
                experimenting MCTS , Section <a href="#conclusion">Conclusion</a> concludes the paper.
            </p>

        </section>

        <section id="games">
            <h2>II. Games</h2>


            <p>
                A classic two-player board game, Tic-Tac-Toe, and a single-player video game, Sokoban, are used as
                illustrative examples. Figure 1 shows screenshots of the two games.
            </p>

            <div class="l-body" style="width: 100%;">
                <div class="l-body" style="width: 100%; display: flex">
                    <img src="image/ttt.png" alt="Tic-Tac-Toe Game."
                         style="margin: auto auto; width: 30%; display: block"/>
                    <img src="image/sokoban.png" alt="Sokoban Game."
                         style="margin: auto auto; width: 30%; display: block"/>
                </div>
                <div class="caption" style="width: 100%; display: block"><b>Figure 1:</b><br> Tic-Tac-Toe (left) and
                    Sokoban (right)
                </div>
            </div>


            <ul>
                <li>
                    Tic-Tac-Toe is a two-player competitive board game <span class="modified_text">with a limited length of
                        gameplay</span>. Players take turns drawing their own marker
                    (usually X or O) on a $3\times3$ grid board, as presented in Figure 1 (left). A player wins once
                    three placed markers can be connected together vertically, horizontally, or diagonally. But if all
                    squares are filled but neither player has won, the game ends in a draw. <span class="modified_text">Due to the participation of the counterpart, MCTS is involved with the min-max and opponent modelling problem.</span>
                </li>
                <li>
                    Sokoban is a classic video game in which a player must strategically push boxes to their designated
                    positions in order to win. The game is set on a fixed board made up of different tiles, as
                    demonstrated in Figure 1 (right). The player can move through empty spaces and push boxes onto
                    spaces without obstacles such as walls and other fixed boxes. <span class="modified_text">In this game, the representation of the state is more complex than Tic-Tac-Toe and a challenge of deep exploration with unlimited steps arises. </span>
                </li>
            </ul>


            <h3>Modelling</h3>


            <p>
                MCTS is typically used to solve sequential decision problems, which are often formulated as a Markov
                decision process (MDP). The four components of an MDP are state $S$, action $A$, transition model $P$
                and reward $R$. An MCTS policy $\pi$ takes an action in a given state s, then obtains a reward $R$ and
                the next state of the environments according to the transition model. The policy is expected to optimise
                the policy and maximise the long-term expected reward. For example, in Tic-Tac-Toe as shown in Figure 1
                (left), the game board is the state of the game, represented as nodes in the game tree, and the marker
                placed by a player is considered an action taken by that player.
            </p>

            <p>
                The interactive interface is based on [<a href="#mcts-viz">6</a>]. The game interfaces and data
                representations of Tic-Tac-Toe and Sokoban are presented below. You can
                activate either game by hovering your mouse pointer over its corresponding image. Detailed gameplay
                instructions for each game are included in its description.
            </p>

            <p>In Tic-Tac-Toe, the game state is represented as a $3 \times 3$ grid.</p>

            <div class="framed">

                <script type="module">

                    import {s, GameStates, currentGameState} from "./mcts-viz/sketch.js"

                    window.myp5 = new p5(s, "show");

                    //common usage in game mod in order to change a function behaviour.
                    window.ori_state_trans = myp5.stateTransition

                    window.sleep = (delay) => new Promise((resolve) => setTimeout(resolve, delay))


                    myp5.stateTransition = async s => {
                        await ori_state_trans(s)
                        if (s === GameStates.WAITING_MACHINE_MOVE) {
                            myp5.whoseTurn = PLAYER.MACHINE;
                            myp5.whoseturnArea.show();
                            myp5.whoseTurnSpan.html(myp5.whoseTurn === PLAYER.HUMAN ? "HUMAN" : "MACHINE");
                            myp5.machineControlsArea.hide()
                            await sleep(500)
                            myp5.machineMctsMove()
                        }
                    }

                    window.ttt_repre = new p5(ttt_representation, "ttt_repre")

                    myp5.onMakeMove = (s) => {
                        ttt_repre.board = s.TTT_BOARD.grid
                    }

                    window.after_setup = async () => {
                        await sleep(1000)
                        ttt_repre.board = myp5.TTT_BOARD
                        ttt_repre.drawBoard()
                    }

                    // after_setup()


                </script>

                <div class="inside">
                    <div class="eyebrow">
                        An introduction to the Tic-Tac-Toe game and its representation.
                    </div>

                    <div class="interactive"
                         style="position: relative; width: fit-content; margin-bottom: 20px; border: solid 1px black; padding: 1em; left: 50%; transform: translate(-50%, 0)">

                        Game: <b>Tic-Tac-Toe</b>


                        <div style="display: flex; align-items: center">

                            <div>
                                <p id="show_starting_player_area">
                                    <b>Choose First Player</b>
                                    <br>
                                    <button class="play_first" onclick="myp5.selectStartingPlayer(0)">HUMAN</button>
                                    <br>
                                    <button class="play_first" onclick="myp5.selectStartingPlayer(1)">AI</button>
                                </p>



                                <div id="show_game_over_area">
                                    <b>The winner is...</b> <span id="show_game_over_winner">HUMAN</span>!
                                    <br>
                                    <button onclick="myp5.reset()">Restart game</button>
                                </div>
                            </div>

                            <div id="show_machine_controls_area" style="display: none">
                                <!--<b class="modified_text">AI controls:</b>-->
                                <!--                                <b class="modified_text">AI controls:</b>-->
                                <div style="background-color: rgb(230, 230, 230); padding: 1em">
                                    <button class="control_panel_btn2" onclick="myp5.machineRandomMove()">Random move
                                    </button>
                                    <br>
                                    <button class="control_panel_btn2" onclick="myp5.machineMctsMove()">MCTS move
                                    </button>
                                    <br>
                                    <button class="control_panel_btn2" onclick="myp5.machineGreedyMove()">Greedy move
                                    </button>
                                    <br>
                                    Run MCTS for:
                                    <br>
                                    <input id="show_mcts_timeout_slider" type="range" min="10" max="2000" value="1000"
                                           step="10"/>
                                    <br>
                                    <span id="show_mcts_timeout_span"><b>1</b></span> iterations

                                    <p id="show_whoseturn_area">
                                    <b>Current Player</b>
                                    <br>
                                    <span id="show_whoseturn">HUMAN</span>
                                </p>
                                </div>
                            </div>

                            <div id="show"></div>
                            <div id="ttt_repre" style="width: 180px; margin: auto"></div>
                        </div>

                    </div>


                    <div class="caption"><b>Figure 2:</b><br> Tic-Tac-Toe: You can select whether you want to play the
                        game as the first or second player by clicking the corresponding button above. The objective of
                        the game is to connect three of your pieces in a row, column, or diagonal. The right panel
                        presents the current state of the Tic-Tac-Toe game as a 3x3 matrix, where unoccupied cells are
                        symbolized by empty spaces. Your pieces and the ones of <span
                                class="modified_text"> AI opponent</span> are denoted by "1" and "-1",
                        respectively.
                    </div>
                </div>
            </div>

            <p>
                The Sokoban game is represented by an $n \times n$ matrix, where $n$ represents the size of the game
                board. The matrix uses 0, 1, 2, 3, and 5 to indicate empty spaces, walls, boxes, targets, and the
                player, respectively.
            </p>


            <div class="framed">

                <div class="inside">
                    <div class="eyebrow">
                        An introduction to the Sokoban game and its representation.
                    </div>

                    <div id="sokobangamediv" class="interactive"
                         style="position: relative; width:fit-content; margin-bottom: 20px; border: solid 1px black; padding: 1em; left: 50%; transform: translate(-50%, 0)">

                        <p>Game: <b>Sokoban</b></p>
                        <p id="sokobangame"></p>
                        <div style="display: flex">
                            <div id="p5_game"></div>
                            <div id="soko_repre" style="width: 200px"></div>
                        </div>


                        <p id="sokobangame_reset">

                            Clear! Step Used: <span id="sokobangame_step"></span>
                            <button onclick="sokobanGame.init()"> Reset</button>
                        </p>

                        <script type="module">
                            import SokobanGame from "./sokoban/SokobanGame.js";

                            const sokobanGame = new SokobanGame()
                            window.sokobanGame = sokobanGame
                            sokobanGame.init()

                            const soko_repre = new p5(sokoban_representation, "soko_repre")
                            soko_repre.onFinished = () => {
                                soko_repre.board = sokobanGame.sokoban.board
                                soko_repre.drawBoard()
                            }
                            // let after_setup = async () => {
                            //     await sleep(1000)
                            //     soko_repre.board = sokobanGame.sokoban.board
                            //     soko_repre.drawBoard()
                            // }
                            //
                            // after_setup()


                            sokobanGame.onMakeAction = (s) => {
                                soko_repre.board = s.sokoban.board
                            }


                            window.randomMove = function () {
                                sokobanGame.machineRandomMove()
                            }

                            window.machineMctsMove = function () {
                                sokobanGame.machineMctsMove()
                            }

                        </script>
                    </div>


                    <div class="caption"><b>Figure 3:</b><br> To play, first move your mouse to the game panel and then
                        use the W, S, A, D, or arrow keys on your keyboard to move the character. The objective is to
                        push all the boxes to the green points (targets) to win the game.
                    </div>
                </div>
            </div>


        </section>

        <section id="algorithm">

            <h2>Algorithm</h2>

            <div class="l-body" style="width: 100%;">
                <img src="image/MCTS.png" alt="Main steps of MCTS."
                     style="margin: auto auto; width: 100%; display: block"/>
                <div class="caption" style="width: 100%; display: block"><b>Figure 4:</b><br> Main steps of MCTS (Figure
                    2 from [<a href="#browne2012survey">1</a>]
                    ). Nodes and branches represent state and action, respectively. Wins and visited time are usually
                    the values of a node.
                </div>
            </div>

            <p>
                The MCTS follows a workflow that illustrated in Figure 4. It involves four main components:
                <i>Selection</i>, <i>Expansion</i>, <i>Simulation</i>, and <i>Backpropagation</i>. The specific four
                steps will be discussed in detail in the subsequent sections. Interactive components are provided to
                demonstrate the four steps of MCTS intuitively.
            </p>


            <h3>Selection</h3>

            <p>
                Starting from the root node, which usually represents the current state, MCTS employs a traversal
                strategy to explore the tree and identify the final node that is expected to lead to an optimal
                solution, as estimated by the selection strategy. It is known as the "exploration-exploitation dilemma"
                that MCTS encounters. The dilemma considers a general problem of choosing actions that seems to be
                optimal at current state or taking a wide step to explore some unknown area to potentially discover
                better solutions. Three selection strategies are described as follows.
            </p>

            <ul>
                <li>A random strategy selects nodes randomly.</li>
                <li>$\epsilon$-greedy strategy selects nodes randomly with probability $\epsilon$. Otherwise, it chooses
                    the node that has the highest reward with probability $1- \epsilon$.
                </li>
                <li>Upper confidence bound (UCB)
                    [<a href="#kocsis2006bandit">5</a>]
                    measures the uncertainty of the expected reward of an action. The average rewards and visited times
                    of actions form the upper confidence bound, seeing Eq. (1).
                </li>
            </ul>


            <p>
                $$ UCB = x_i +c\sqrt{\frac{\ln{n}}{n_i}} \qquad (1)$$
                where $x_i$ is the averaged reward of action $i$, $c$ is the exploration coefficient, $n$ is the total
                visited times and $n_i$ is the number of times that the action $i$ is selected.
                The node with the highest UCB value will be selected.
            </p>

            <p>
                UCB is the most commonly used selection strategy in MCTS, called as Upper Confidence Bound for Trees
                (UCT). It balances the exploration and exploitation by considering both reward and visited times of a
                node. $x_i$ estimates the current collected experience, e.g., the optimal action that has been taken,
                while $c\sqrt{\frac{\ln{n}}{n_i}}$ considers the frequency that a nodes is visited. The less frequently
                visited node has larger possibility to be chosen so that more unknown area will be explored. The
                coefficient $c$ controls the importance of exploration.
            </p>

            <p>
                The selection algorithm is shown below.
            </p>

            <pre id="selection_pseudo">
              \begin{algorithm}
              \caption{Selection}
              \begin{algorithmic}
              \PROCEDURE{Select}{$root$}
              \STATE Set $node$ $\gets$ $root$
              \WHILE {$node$ is not leaf and $node$ is not fully explored}
              \STATE $node$ $\gets$ Node with the highest UCB value(Eq. (1)) among $node.children$
              \ENDWHILE
              \STATE \Return $node$
              \ENDPROCEDURE
              \end{algorithmic}
              \end{algorithm}
            </pre>

            <p>You can try out the selection procedure in the interactive panel below.</p>

            <div class="framed">

                <div class="inside">
                    <div class="eyebrow">
                        Procedure of Selection. <span class="modified_text"> In the tree panel, you can drag the canvas, scroll the wheel the zoom in and out. When moving the cursor
                        to the tree node, a detailed panel will shown in the upper left area.</span>
                    </div>

                    <script type="module">

                        import {ActionColor} from "./mcts-viz/tree_vis.js";

                        window.make_random_board = (interactive, p5, show_action, min_step = 1) => {

                            interactive.reset()
                            interactive.have_board = true
                            p5.random_board(min_step)
                            p5.makeMctsMove(interactive)
                            let action = interactive.clickNextAction(show_action)
                            p5.current_action = document.getElementById(show_action + "_current_action")
                            p5.current_action.textContent = action.kind
                            p5.current_action.style.color = ActionColor[action.kind]
                            p5.current_action.style.backgroundColor = ActionColor.White
                        }

                        window.make_random_simulation_board = (interactive, p5, show_action, min_step = 1) => {
                            interactive.reset()
                            interactive.have_board = true
                            p5.random_board(min_step)
                            p5.makeSimulationMove(interactive)
                        }

                        window.click_simulation_next_action = (interactive, p5) => {
                            if (interactive.have_board === true) {
                                let action = interactive.clickNextAction(true)
                                // p5.current_action.textContent = action.kind
                                // p5.current_action.style.color = ActionColor[action.kind]
                                // p5.current_action.style.backgroundColor = ActionColor.White
                            }
                        }

                        window.next_show_action = (interactive, p5, show_action) => {
                            if (interactive.have_board === true) {
                                let action = interactive.nextUntil(show_action)
                                if (action === null || action === undefined)
                                    return
                                p5.current_action.textContent = action.kind
                                p5.current_action.style.color = ActionColor[action.kind]
                                p5.current_action.style.backgroundColor = ActionColor.White
                            }
                        }

                        window.click_next_action = (interactive, p5) => {
                            if (interactive.have_board === true) {
                                let action = interactive.clickNextAction(true)
                                p5.current_action.textContent = action.kind
                                // console.log(ActionColor[action.kind])
                                // console.log(action.kind)
                                p5.current_action.style.color = ActionColor[action.kind]
                                p5.current_action.style.backgroundColor = ActionColor.White
                            }
                        }
                    </script>

                    <div style="position: relative;">
                        <div class="four_procedure">
                            <div class="interactive-ttt-left">
                                <script type="module">
                                    import {vis} from "./mcts-viz/tree_vis.js"
                                    import {s} from "./mcts-viz/sketch.js"

                                    window.selection_p5 = new p5(s, "selection")

                                    selection_p5.mouseClicked = () => {
                                    }
                                    selection_p5.handleOver = () => {
                                    }

                                    window.selection_tree_vis_p5 = new p5(vis, "selection_tree_vis");
                                    window.selection_interactive = new TTTInteractive(selection_tree_vis_p5, "selection", selection_p5)
                                    selection_interactive.setupInteractive()

                                    window.selection_make_random_board = (interactive, p5, show_action) => {
                                        make_random_board(interactive, p5, show_action, 3)
                                        selection_interactive.clickVisualizeMideterStep()
                                        selection_interactive.nextUntil("selection")
                                        // selection_interactive.makeFakePlay()
                                    }
                                </script>
                                <div id="selection"></div>

                                <button class="four_procedure_btn"
                                        onclick="selection_make_random_board(selection_interactive, selection_p5, 'selection')">
                                    Make random board
                                </button>
                                <br>
                                <br>
                                <button class="four_procedure_btn"
                                        onclick="next_show_action(selection_interactive, selection_p5, 'selection')">
                                    Continue
                                </button>
                                <br>
                                <br>
                                <button class="four_procedure_btn" style="display: none"
                                        onclick="click_next_action(selection_interactive, selection_p5)">Continue
                                </button>

                                <p id="selection_starting_player_area">
                                    <b style="display: none">Choose First Player</b>
                                    <br>
                                    <button onclick="selection_p5.selectStartingPlayer(0)" style="display: none">HUMAN
                                    </button>
                                    <button onclick="selection_p5.selectStartingPlayer(1)" style="display: none">
                                        AI
                                    </button>
                                </p>
                                <div id="selection_whoseturn_area" style="display: none">
                                    <b style="display: none">Whose turn?</b> <span id="selection_whoseturn"
                                                                                   style="display: none">HUMAN</span>
                                    <br>
                                    <b style="display: none">Current Action:</b> <span id="selection_current_action"
                                                                                       style="display: none"></span>
                                </div>
                                <div id="selection_machine_controls_area">
                                    <!--<b class="modified_text">AI controls:</b>-->
                                    <div style="background-color: rgb(230, 230, 230); padding: 1em">
                                        <br>
                                        <button onclick="selection_p5.machineRandomMove()">Make random move</button>
                                        <br>
                                        <button onclick="selection_p5.machineMctsMove(selection_interactive)">Make MCTS
                                            move
                                        </button>
                                        <br>
                                        <button onclick="selection_p5.machineGreedyMove()">Make Greedy move</button>
                                        <br>

                                        <br>
                                        Run MCTS for:
                                        <br>
                                        <input id="selection_mcts_timeout_slider" type="range" min="10" max="2000"
                                               value="30" step="10"/>
                                        <br>
                                        <span id="selection_mcts_timeout_span"><b>1</b></span> iterations
                                    </div>
                                </div>
                                <div id="selection_game_over_area">
                                    <b>The winner is...</b> <span id="selection_game_over_winner">HUMAN</span>!
                                    <br>
                                    <button onclick="selection_p5.reset()">Restart game</button>
                                </div>

                            </div>

                            <div class="interactive-ttt-right">
                                <div style="border: solid 1px lightgrey; height: 0px; display: none">
                                    <div style="float: left; height: 100%; width: auto; padding: 0.25em;">
                                        <b>Current action</b>:
                                        <br>
                                        <span id="selection_current_action_count">(0/0)</span>
                                        <br>
                                        <span id="selection_current_action_kind">---</span>
                                        <br>
                                        <button id="selection_btn_next_action" disabled>next action &gt;</button>
                                    </div>
                                    <div style="float: left; height: 100%; width: auto; padding: 0.25em;">
                                        <b>Current iteration</b>:
                                        <br>
                                        <span id="selection_current_iteration_count">(0/0)</span>
                                        <br>
                                        <br>
                                        <button id="selection_btn_next_iteration" disabled>next iteration &gt;&gt;
                                        </button>
                                    </div>
                                    <div style="float: left; height: 100%; width: auto; margin-top: 0.2em; margin-bottom: 0.2em;">
                                        <button style="width: 200px; height: 45%; margin-bottom: 0.2em;"
                                                id="selection_btn_last_step" disabled>visualize last step &gt;&gt;&gt;
                                        </button>
                                        <br>
                                        <button style="width: 200px; height: 45%;" id="selection_btn_make_play"
                                                disabled>make play
                                        </button>
                                    </div>
                                </div>
                                <div id="selection_tree_vis" class="tree_vis"></div>
                            </div>
                        </div>
                    </div>


                    <div class="caption"><b>Figure 5:</b><br> By clicking the "Make random board" button, you can
                        randomly generate a Tic-Tac-Toe game state.<br>
                        By clicking the "Continue" button, you can automatically move to the next step in MCTS'
                        selection process.<br>
                        The node that is currently selected is highlighted with a red border.
                    </div>
                </div>
            </div>


            <h3>Expansion</h3>

            <p>
                Expansion is the process of exploring new states and adding new nodes to the tree.
                An expandable node is the one that still has available actions to explore. When a node is selected for
                expansion, the algorithm creates new child nodes based on the available action. If the selected node has
                no available actions, the selection strategy continues searching until an expandable or terminal node is
                found. The number of expanded nodes usually depends on the available action space and the computation
                budget.
            </p>

            <p>
                The expansion algorithm is as below.
            </p>

            <pre id="expansion_pseudo">
              \begin{algorithm}
              \caption{Expansion}
              \begin{algorithmic}
              \PROCEDURE{Expand}{node}
              \STATE Sample $a$ from unvisited actions of $node$
              \STATE $new\_node$ $\gets$ $node$ after taking action $a$
              \STATE $node.children.append(new\_node)$
              \STATE \Return $new\_node$
              \ENDPROCEDURE
              \end{algorithmic}
              \end{algorithm}
            </pre>

            <p>You can test the expansion algorithm in the interactive panel below.</p>

            <div class="framed">

                <div class="inside">
                    <div class="eyebrow">
                        Procedure of Expansion.
                    </div>

                    <div>
                        <div class="four_procedure">
                            <div class="interactive-ttt-left">

                                <script type="module">
                                    import {vis} from "./mcts-viz/tree_vis.js"
                                    import {s} from "./mcts-viz/sketch.js"

                                    window.expansion_p5 = new p5(s, "expansion")
                                    window.expansion_tree_vis_p5 = new p5(vis, "expansion_tree_vis");
                                    window.expansion_interactive = new TTTInteractive(expansion_tree_vis_p5, "expansion", expansion_p5)
                                    expansion_p5.mouseClicked = () => {
                                    }
                                    expansion_p5.handleOver = () => {
                                    }
                                    expansion_interactive.setupInteractive()
                                </script>
                                <div id="expansion"></div>

                                <button class="four_procedure_btn"
                                        onclick="make_random_board(expansion_interactive, expansion_p5, 'expansion', 3)">
                                    Make random board
                                </button>
                                <br>
                                <br>
                                <button class="four_procedure_btn"
                                        onclick="next_show_action(expansion_interactive, expansion_p5, 'expansion')">
                                    Continue
                                </button>
                                <br>
                                <br>
                                <button class="four_procedure_btn" style="display: none"
                                        onclick="click_next_action(expansion_interactive, expansion_p5)">Next Step
                                </button>


                                <p id="expansion_starting_player_area">
                                    <b style="display: none">Who will start the game?</b>
                                    <br>
                                    <button onclick="expansion_p5.selectStartingPlayer(0)" style="display: none">HUMAN

                                    </button>
                                    <button onclick="expansion_p5.selectStartingPlayer(1)" style="display: none">
                                        AI
                                    </button>
                                </p>
                                <p id="expansion_whoseturn_area">
                                    <b style="display: none">Whose turn?</b> <span id="expansion_whoseturn"
                                                                                   style="display: none">HUMAN</span>
                                    <br>
                                    <b style="display: none">Current Action:</b> <span id="expansion_current_action"
                                                                                       style="display: none"></span>
                                </p>
                                <div id="expansion_machine_controls_area">
                                    <!--<b class="modified_text">AI controls:</b>-->
                                    <div style="background-color: rgb(230, 230, 230); padding: 1em">
                                        <button onclick="expansion_p5.machineRandomMove()">Make random move</button>
                                        <br>
                                        <button onclick="expansion_p5.machineMctsMove(expansion_interactive)">Make MCTS
                                            move
                                        </button>
                                        <br>
                                        <button onclick="expansion_p5.machineGreedyMove()">Make Greedy move</button>
                                        <br>
                                        Run MCTS for:
                                        <br>
                                        <input id="expansion_mcts_timeout_slider" type="range" min="10" max="2000"
                                               value="30" step="10"/>
                                        <br>
                                        <span id="expansion_mcts_timeout_span"><b>1</b></span> iterations
                                    </div>
                                </div>
                                <div id="expansion_game_over_area">
                                    <b>The winner is...</b> <span id="expansion_game_over_winner">HUMAN</span>!
                                    <br>
                                    <button onclick="expansion_p5.reset()">Restart game</button>
                                </div>

                            </div>

                            <div class="interactive-ttt-right">
                                <div style="border: solid 1px lightgrey; height: 0px; display: none">
                                    <div style="float: left; height: 100%; width: auto; padding: 0.25em">
                                        <b>Current action</b>:
                                        <br>
                                        <span id="expansion_current_action_count">(0/0)</span>
                                        <br>
                                        <span id="expansion_current_action_kind">---</span>
                                        <br>
                                        <button id="expansion_btn_next_action" disabled>next action &gt;</button>
                                    </div>
                                    <div style="float: left; height: 100%; width: auto; padding: 0.25em;">
                                        <b>Current iteration</b>:
                                        <br>
                                        <span id="expansion_current_iteration_count">(0/0)</span>
                                        <br>
                                        <br>
                                        <button id="expansion_btn_next_iteration" disabled>next iteration &gt;&gt;
                                        </button>
                                    </div>
                                    <div style="float: left; height: 100%; width: auto; margin-top: 0.2em; margin-bottom: 0.2em;">
                                        <button style="width: 200px; height: 45%; margin-bottom: 0.2em;"
                                                id="expansion_btn_last_step" disabled>visualize last step &gt;&gt;&gt;
                                        </button>
                                        <br>
                                        <button style="width: 200px; height: 45%;" id="expansion_btn_make_play"
                                                disabled>make play
                                        </button>
                                    </div>
                                </div>
                                <div id="expansion_tree_vis" class="tree_vis"></div>
                            </div>
                        </div>
                    </div>


                    <div class="caption"><b>Figure 6:</b><br> Clicking "Continue" will automatically move to the
                        next expansion step in the Monte Carlo search.<br>
                        The selected node to be expanded is highlighted with a pink border. The expanded node is highlighted with a green border.
                    </div>
                </div>
            </div>


            <h3>Simulation</h3>

            <p>
                Simulation is a crucial component of the MCTS algorithm, which involves rolling out various gameplays
                from the expanded node.
                The choice of simulation policy has a large impact on the final result.
                A common strategy for selecting actions is to use a random policy due to its simplicity, which chooses
                actions uniformly at random at successive states.
                The simulation continues until a terminal state is reached. The results of the simulation, such as the
                final state or a reward value, is then collected and used to update the values of the node. However, the
                random policy can be highly inefficient, which has led to the development of more advanced techniques,
                such as rule-based simulation and learning methods.
            </p>

            <p>
                The simulation algorithm is as below.
            </p>

            <pre id="simulation_pseudo">
              \begin{algorithm}
              \caption{Simulation}
              \begin{algorithmic}
              \PROCEDURE{Simulate}{node}
              \STATE $r \gets 0$
              \While{not terminated}
                \STATE Sample $a$ from available action space of $node$
                \STATE $new\_node$ $\gets$ $node$ after taking action $a$
                \STATE $r \gets r+evaluate(new\_node)$
                \STATE $node$ $\gets$ $new\_node$
              \ENDWHILE
              \STATE \Return $r$
              \ENDPROCEDURE
              \end{algorithmic}
              \end{algorithm}
            </pre>

            <p>You can try out the simulation process in the interactive panel below.</p>

            <div class="framed">

                <div class="inside">
                    <div class="eyebrow">
                        Procedure of Simulation.
                    </div>


                    <div>
                        <div class="four_procedure">
                            <div class="interactive-ttt-left">

                                <script type="module">
                                    import {vis} from "./mcts-viz/tree_vis.js"
                                    import {vis_simulation} from "./mcts-viz/tree_viz_simulation.js";
                                    import {s} from "./mcts-viz/sketch.js"

                                    window.simulation_p5 = new p5(s, "simulation")
                                    window.simulation_tree_vis_p5 = new p5(vis_simulation, "simulation_tree_vis");
                                    window.simulation_interactive = new TTTInteractive(simulation_tree_vis_p5, "simulation", simulation_p5)
                                    simulation_p5.mouseClicked = () => {
                                    }
                                    simulation_p5.handleOver = () => {
                                    }
                                    simulation_interactive.setupInteractive()
                                </script>
                                <div id="simulation"></div>

                                <button class="four_procedure_btn"
                                        onclick="make_random_simulation_board(simulation_interactive, simulation_p5, 'simulation', 3)">
                                    Make random board
                                </button>
                                <br>
                                <br>
                                <button class="four_procedure_btn"
                                        onclick="next_show_action(simulation_interactive, simulation_p5, 'simulation')"
                                        style="display: none;">
                                    Continue
                                </button>
                                <br>
                                <br>
                                <button class="four_procedure_btn"
                                        onclick="click_simulation_next_action(simulation_interactive, simulation_p5)">
                                    Continue
                                </button>

                                <p id="simulation_starting_player_area" style="display: none">
                                    <b style="display: none">Who will start the game?</b>
                                    <br>
                                    <button onclick="simulation_p5.selectStartingPlayer(0)" style="display: none">HUMAN

                                    </button>
                                    <button onclick="simulation_p5.selectStartingPlayer(1)" style="display: none">
                                        AI
                                    </button>
                                </p>

                                <p id="simulation_whoseturn_area" style="display: none">
                                    <b style="display: none">Whose turn?</b> <span id="simulation_whoseturn"
                                                                                   style="display: none">HUMAN</span>
                                    <br>
                                    <b style="display: none">Current Action:</b> <span id="simulation_current_action"
                                                                                       style="display: none"></span>
                                </p>
                                <div id="simulation_machine_controls_area">
                                    <!--<b class="modified_text">AI controls:</b>-->
                                    <div style="background-color: rgb(230, 230, 230); padding: 1em">
                                        <button onclick="simulation_p5.machineRandomMove()">Make random move</button>
                                        <br>
                                        <!--                                        <button onclick="simulation_p5.machineMctsMove(simulation_interactive)">Make-->
                                        <!--                                            MCTS move-->
                                        <!--                                        </button>-->

                                        <button onclick="simulation_p5.makeSimulationMove(simulation_interactive)">Make
                                            MCTS move
                                        </button>
                                        <br>
                                        <button onclick="simulation_p5.machineGreedyMove()">Make Greedy move</button>
                                        <br>
                                        Run MCTS for:
                                        <br>
                                        <input id="simulation_mcts_timeout_slider" type="range" min="10" max="2000"
                                               value="30" step="10"/>
                                        <br>
                                        <span id="simulation_mcts_timeout_span"><b>1</b></span> iterations
                                    </div>
                                </div>
                                <div id="simulation_game_over_area">
                                    <b>The winner is...</b> <span id="simulation_game_over_winner">HUMAN</span>!
                                    <br>
                                    <button onclick="simulation_p5.reset()">Restart game</button>
                                </div>

                            </div>

                            <div class="interactive-ttt-right">
                                <div style="border: solid 1px lightgrey; height: 110px; display: none">
                                    <div style="float: left; height: 100%; width: auto; padding: 0.25em">
                                        <b>Current action</b>:
                                        <br>
                                        <span id="simulation_current_action_count">(0/0)</span>
                                        <br>
                                        <span id="simulation_current_action_kind">---</span>
                                        <br>
                                        <button id="simulation_btn_next_action" disabled>next action &gt;</button>
                                    </div>
                                    <div style="float: left; height: 100%; width: auto; padding: 0.25em;">
                                        <b>Current iteration</b>:
                                        <br>
                                        <span id="simulation_current_iteration_count">(0/0)</span>
                                        <br>
                                        <br>
                                        <button id="simulation_btn_next_iteration" disabled>next iteration &gt;&gt;
                                        </button>
                                    </div>
                                    <div style="float: left; height: 100%; width: auto; margin-top: 0.2em; margin-bottom: 0.2em;">
                                        <button style="width: 200px; height: 45%; margin-bottom: 0.2em;"
                                                id="simulation_btn_last_step" disabled>visualize last step &gt;&gt;&gt;
                                        </button>
                                        <br>
                                        <button style="width: 200px; height: 45%;" id="simulation_btn_make_play"
                                                disabled>make play
                                        </button>
                                    </div>
                                </div>
                                <div id="simulation_tree_vis" class="tree_vis"></div>
                            </div>
                        </div>
                    </div>

                    <div class="caption"><b>Figure 7:</b><br> Clicking "Continue" will automatically do simulation step in the MCTS.<br>
                        The node being simulated is connected with a dotted line.
                    </div>
                </div>
            </div>

            <h3>Backpropagation</h3>

            <p>
                During the backpropagation phase of MCTS, the statistics gathered during simulation are propagated back
                along the path up the tree from the expanded node. This involves updating the visitation counts and
                values, such as rewards and wins, for all nodes along the path from the expanded node to the root node
                of the tree. Considering Tic-Tac-Toe, players A and B take turns making moves. When MCTS determines the
                next move for player A, it obtains the action that leads to win with the highest probability in the
                current state. The tree is built with different layers representing the players, so the expandable
                states belong to player B, i.e., those where B would make a move next. If, after simulating a number of
                future moves, it is determined that A wins the game, the visitation count for each of the nodes in the
                visited path will be incremented by one. It is notable that since Tic-Tac-Toe is a two-player
                competitive game, the value update mechanism of nodes is different compared with the single player case.
                For example, wins for nodes that belong to player A will be incremented by one, while wins for nodes
                that belong to player B will be decremented, if player A wins the game according to the simulation. All
                updates are limited to nodes that trace back from the expanded node for the simulation.
            </p>

            <p>The backpropagation algorithm is as below.</p>

            <pre id="back_pseudo">
              \begin{algorithm}
              \caption{Backpropagation}
              \begin{algorithmic}
              \PROCEDURE{Backpropagation}{$node$, $value$}

                \STATE $node.visit$ $\gets$ $node.visit+1$

                \IF{node is root}
                  \RETURN
                \ENDIF

                \STATE $node.value$ $\gets$ $node.value+value$
                \STATE Backpropagation(node.parent, value)

              \ENDPROCEDURE
              \end{algorithmic}
              \end{algorithm}
            </pre>

            <p>You can test the backpropagation algorithm in the interactive panel below.</p>

            <div class="framed">

                <div class="inside">
                    <div class="eyebrow">
                        Procedure of Backpropagation.
                    </div>

                    <div>
                        <div class="four_procedure">
                            <div class="interactive-ttt-left">

                                <script type="module">
                                    import {vis} from "./mcts-viz/tree_vis.js"
                                    import {s} from "./mcts-viz/sketch.js"

                                    window.backpropagration_p5 = new p5(s, "backpropagration")
                                    window.backpropagration_tree_vis_p5 = new p5(vis, "backpropagration_tree_vis");
                                    window.backpropagration_interactive = new TTTInteractive(backpropagration_tree_vis_p5, "backpropagration", backpropagration_p5)
                                    backpropagration_p5.mouseClicked = () => {
                                    }
                                    backpropagration_p5.handleOver = () => {
                                    }
                                    backpropagration_interactive.setupInteractive()
                                </script>
                                <div id="backpropagration"></div>

                                <button class="four_procedure_btn"
                                        onclick="make_random_board(backpropagration_interactive, backpropagration_p5, 'backpropagation')">
                                    Make random board
                                </button>
                                <br>
                                <br>
                                <button class="four_procedure_btn"
                                        onclick="next_show_action(backpropagration_interactive, backpropagration_p5, 'backpropagation')">
                                    Continue
                                </button>
                                <br>
                                <br>
                                <button class="four_procedure_btn" style="display: none"
                                        onclick="click_next_action(backpropagration_interactive, backpropagration_p5)">
                                    Next Step
                                </button>


                                <p id="backpropagration_starting_player_area">
                                    <b style="display: none">Who will start the game?</b>
                                    <br>
                                    <button onclick="backpropagration_p5.selectStartingPlayer(0)" style="display: none">
                                        HUMAN
                                    </button>
                                    <button onclick="backpropagration_p5.selectStartingPlayer(1)" style="display: none">
                                        AI
                                    </button>
                                </p>
                                <p id="backpropagration_whoseturn_area">
                                    <b style="display: none">Whose turn?</b> <span id="backpropagration_whoseturn"
                                                                                   style="display: none">HUMAN</span>
                                    <br>
                                    <b style="display: none">Current Action:</b> <span
                                        id="backpropagation_current_action" style="display: none"></span>
                                </p>
                                <div id="backpropagration_machine_controls_area">
                                    <!--<b class="modified_text">AI controls:</b>-->
                                    <div style="background-color: rgb(230, 230, 230); padding: 1em">
                                        <button onclick="backpropagration_p5.machineRandomMove()">Make random move
                                        </button>
                                        <br>
                                        <button onclick="backpropagration_p5.machineMctsMove(backpropagration_interactive)">
                                            Make MCTS move
                                        </button>
                                        <br>
                                        <button onclick="backpropagration_p5.machineGreedyMove()">Make Greedy move
                                        </button>
                                        <br>
                                        Run MCTS for:
                                        <br>
                                        <input id="backpropagration_mcts_timeout_slider" type="range" min="10"
                                               max="2000" value="30" step="10"/>
                                        <br>
                                        <span id="backpropagration_mcts_timeout_span"><b>1</b></span> iterations
                                    </div>
                                </div>
                                <div id="backpropagration_game_over_area">
                                    <b>The winner is...</b> <span id="backpropagration_game_over_winner">HUMAN</span>!
                                    <br>
                                    <button onclick="backpropagration_p5.reset()">Restart game</button>
                                </div>

                            </div>

                            <div class="interactive-ttt-right">
                                <div style="border: solid 1px lightgrey; height: 110px; display: none">
                                    <div style="float: left; height: 100%; width: auto; padding: 0.25em">
                                        <b>Current action</b>:
                                        <br>
                                        <span id="backpropagration_current_action_count">(0/0)</span>
                                        <br>
                                        <span id="backpropagration_current_action_kind">---</span>
                                        <br>
                                        <button id="backpropagration_btn_next_action" disabled>next action &gt;</button>
                                    </div>
                                    <div style="float: left; height: 100%; width: auto; padding: 0.25em;">
                                        <b>Current iteration</b>:
                                        <br>
                                        <span id="backpropagration_current_iteration_count">(0/0)</span>
                                        <br>
                                        <br>
                                        <button id="backpropagration_btn_next_iteration" disabled>next iteration &gt;&gt;</button>
                                    </div>
                                    <div style="float: left; height: 100%; width: auto; margin-top: 0.2em; margin-bottom: 0.2em;">
                                        <button style="width: 200px; height: 45%; margin-bottom: 0.2em;"
                                                id="backpropagration_btn_last_step" disabled>visualize last step &gt;&gt;&gt;
                                        </button>
                                        <br>
                                        <button style="width: 200px; height: 45%;" id="backpropagration_btn_make_play"
                                                disabled>make play
                                        </button>
                                    </div>
                                </div>
                                <div id="backpropagration_tree_vis" class="tree_vis"></div>
                            </div>
                        </div>
                    </div>

                    <div class="caption"><b>Figure 8:</b><br> Clicking "Continue" will automatically move to
                        the next backpropagation step in MCTS.<br>
                        The node being back propagated is highlighted with a blue border.
                    </div>
                </div>
            </div>

            <p>
                By integrating the four essential components of selection, expansion, simulation, and backpropagation, a
                succinct and cohesive algorithm for the complete MCTS process can be constructed.
            </p>

            <pre id="mcts_pseudo">
              \begin{algorithm}
              \caption{MCTS}
              \begin{algorithmic}
              \PROCEDURE{Mcts}{root}
              \While{not end\_condition}
                \State $node$ $\gets$ $Select(root)$
                \State $node$ $\gets$ $Expand(node)$
                \State $value$ $\gets$ Simulate($node$)
                \State Backpropagation($node$, $value$)
              \EndWhile
              \Return Highest visit value node in $root.children$
              \EndProcedure
              \end{algorithmic}
              \end{algorithm}
            </pre>

        </section>

        <section id="practise">
            <h2>Practise</h2>

            <p>
                MCTS is a powerful algorithm that can effectively handle various types of games, including adversarial
                games such as Tic-Tac-Toe and puzzle games such as Sokoban. In the following sections, we will delve
                into how MCTS works in these two games and provide interactive components to illustrate its
                effectiveness.
            </p>

            <p>
                For the Sokoban game, choose "Human" or "Machine" to decide who goes first. During the player's turn,
                click on the highlighted area on the board to make a move. <span class="modified_text"> During the AI's turn,</span>
                you can select one
                of three decision-making modes for the <span class="modified_text"> AI</span>: random, greedy, and MCTS.
                In MCTS, you can slide the
                slider to select the number of iterations. The higher the number of iterations is, the better decisions
                the AI will make. In the MCTS panel on the right, choose "Next Step" to view the MCTS' steps at each
                stage or select "Next Iteration" to see the situation after each iteration, including selection,
                expansion, simulation, and backpropagation. The tree displays the current MCTS information. You can also
                select "Visualize Last Step" to directly view the final step and each node's value. Finally, click "Make
                Play" <span class="modified_text"> to let the AI</span> make a move on the board.
            </p>

            <div class="framed">

                <div class="inside">
                    <div class="eyebrow">
                        Tic-Tac-Toe: MCTS can be used in competitive games.
                    </div>

                    <div>

                        <div class="four_procedure">
                            <div class="interactive-ttt-left">

                                <script type="module">
                                    import {vis} from "./mcts-viz/tree_vis.js"
                                    import {s} from "./mcts-viz/sketch.js"

                                    window.vs_p5 = new p5(s, "vs")
                                    window.vs_tree_vis_p5 = new p5(vis, "vs_tree_vis");
                                    window.vs_interactive = new TTTInteractive(vs_tree_vis_p5, "vs", vs_p5)
                                    vs_interactive.setupInteractive()
                                </script>
                                <div id="vs"></div>
                                <p id="vs_starting_player_area">
                                    <b>Who will start the game?</b>
                                    <br>
                                    <button class="play_first" onclick="vs_p5.selectStartingPlayer(0)">HUMAN</button>
                                    <br>
                                    <button class="play_first" onclick="vs_p5.selectStartingPlayer(1)">AI</button>
                                </p>

                                <div class="control_panel" id="vs_machine_controls_area">
                                    <!--<b class="modified_text">AI controls:</b>-->

                                    <div style="display: flex;">

                                        <button class="control_panel_btn" onclick="vs_p5.machineRandomMove()">Random
                                            move
                                        </button>
                                        <br>
                                        <button class="control_panel_btn" onclick="vs_p5.machineGreedyMove()">Greedy
                                            move
                                        </button>
                                        <br>
                                        <button class="control_panel_btn"
                                                onclick="vs_p5.machineMctsMove(vs_interactive)">MCTS move
                                        </button>
                                        <br>
                                        <button class="control_panel_btn" onclick="vs_p5.reset()">Reset game</button>
                                    </div>

                                    <div>
                                        <br>
                                        Run MCTS for:
                                        <br>
                                        <input id="vs_mcts_timeout_slider" type="range" min="100" max="2000"
                                               value="1000"
                                               step="100"/>
                                        <br>
                                        <span id="vs_mcts_timeout_span"><b>1</b></span> iterations
                                    </div>
                                </div>


                                <p id="vs_whoseturn_area">
                                    <b style="display: none">Current Player:</b> <br> <span id="vs_whoseturn"
                                                                                            style="display: none">HUMAN</span>
                                </p>
                                <div id="vs_game_over_area">
                                    <b>The winner is...</b> <span id="vs_game_over_winner">HUMAN</span>!
                                    <br>
                                    <button onclick="vs_p5.reset()">Restart game</button>
                                </div>

                            </div>

                            <div class="interactive-ttt-right" style="flex-direction: column">
                                <div style="border: solid 1px lightgrey; height: 110px; display: flex; align-items: center; margin: 20px">
                                    <div style="float: left; height: 100%; width: auto; padding: 0.25em">
                                        <b>Current step</b>:
                                        <br>
                                        <span id="vs_current_action_count">(0/0)</span>
                                        <br>
                                        <br>
                                        <button id="vs_btn_next_action" disabled>next step &gt;</button>
                                    </div>

                                    <div style="float: left; height: 100%; width: auto; padding: 0.25em;">
                                        <b>Current iteration</b>:
                                        <br>
                                        <span id="vs_current_iteration_count">(0/0)</span>
                                        <br>
                                        <br>
                                        <button id="vs_btn_next_iteration" disabled>next iteration &gt;&gt;</button>
                                    </div>


                                    <div style="display: flex; float: left; height: 100%; width: auto; align-items: center; margin: 10px">
                                        <button style="width: 200px; height: 80%; margin: 10px; font-size: large"
                                                id="vs_btn_last_step" disabled>visualize last step &gt;&gt;&gt;
                                        </button>
                                        <br>
                                        <button style="width: 150px; height: 80%; margin: 10px; font-size: larger"
                                                id="vs_btn_make_play" disabled>make
                                            play
                                        </button>
                                    </div>


                                    <span id="vs_current_action_kind" style="font-size: larger">---</span>

                                </div>
                                <div id="vs_tree_vis" class="tree_vis"></div>
                            </div>
                        </div>

                    </div>

                    <div class="caption"><b>Figure 9:</b><br> Human VS Machine.
                    </div>
                </div>
            </div>

            <p>
                In Sokoban, selecting "Auto Play" enables the MCTS to run automatically. "Auto Play" can automatically
                execute MCTS. At each step, the Monte Carlo tree will select the optimal solution it found.
                Alternatively, you can use "Make MCTS Move" to view each step of the search in detail on the right
                panel. You can also choose to play manually by moving the mouse to the game and using W, A, S, D, or
                arrow keys to move.
            </p>

            <div class="framed">

                <div class="inside">
                    <div class="eyebrow">
                        Sokoban: MCTS can be used to solve Sokoban. Sokoban is a puzzle game.
                    </div>

                    <div>
                        <script type="module" src="./sokoban/tree_viz_sokoban.js"></script>
                        <script src="./sokoban/sokoban_interactive.js"></script>
                        <script src="./sokoban/sokoban_mcts.js"></script>
                        <script type="module">
                            import {vis_sokoban} from "./sokoban/tree_viz_sokoban.js";
                            import SokobanGame from "./sokoban/SokobanGame.js";

                            // let board = [
                            //     [1,1,1,1,1,0,0,0,0],
                            //     [1,0,0,5,1,0,0,0,0],
                            //     [1,0,2,2,1,0,1,1,1],
                            //     [1,0,2,0,1,0,1,3,1],
                            //     [1,1,1,0,1,1,1,3,1],
                            //     [0,1,1,0,0,0,0,3,1],
                            //     [0,1,0,0,0,1,0,0,1],
                            //     [0,1,0,0,0,1,1,1,1],
                            //     [0,1,1,1,1,1,0,0,0]
                            // ]

                            window.mcts_board = [
                                [0, 1, 1, 1, 1, 0, 0, 0, 0],
                                [0, 1, 1, 1, 1, 0, 0, 0, 0],
                                [0, 1, 1, 5, 1, 0, 1, 1, 1],
                                [0, 1, 1, 2, 1, 0, 1, 1, 1],
                                [0, 1, 1, 0, 1, 1, 1, 0, 1],
                                [0, 1, 1, 0, 3, 0, 0, 0, 1],
                                [0, 1, 0, 0, 0, 1, 0, 0, 1],
                                [0, 1, 0, 0, 0, 1, 1, 1, 1],
                                [0, 1, 1, 1, 1, 1, 0, 0, 0]
                            ]

                            window.mcts_sokobanGame = new SokobanGame("mcts-", JSON.parse(JSON.stringify(mcts_board)))
                            window.soko_mcts_tree_vis_p5 = new p5(vis_sokoban, "soko_mcts_tree_vis");
                            window.soko_mcts_interactive = new SokobanInteractive(soko_mcts_tree_vis_p5, "soko_mcts", mcts_sokobanGame)
                            window.soko_mcts_interactive.setupInteractive()
                            mcts_sokobanGame.init(JSON.parse(JSON.stringify(mcts_board)))
                        </script>

                        <div class="four_procedure">
                            <div id="mcts-sokobangamediv" class="interactive-ttt-left">
                                <!--                                <p>Game: <b>Sokoban</b></p>-->

                                <p id="mcts-sokobangame"></p>

                                <div id="mcts-p5_game"></div>


                                <div class="control_panel" id="mcts-sokobangame_machine_controls_area">

                                    <div style="display: flex">
                                        <button class="control_panel_btn" id="sokoban_rand_move"
                                                onclick="mcts_sokobanGame.machineRandomMove()">Random move
                                        </button>
                                        <br>
                                        <button class="control_panel_btn" id="sokoban_mcts_move"
                                                onclick="mcts_sokobanGame.machineMctsMove(soko_mcts_interactive)">
                                            MCTS move
                                        </button>
                                        <br>
                                        <button class="control_panel_btn" id="sokoban_autoplay"
                                                onclick="mcts_sokobanGame.autoPlay(soko_mcts_interactive)">Auto Play
                                        </button>
                                        <br>
                                        <button class="control_panel_btn" id="sokoban_cancel"
                                                onclick="mcts_sokobanGame.cancelPlay(soko_mcts_interactive)"
                                                style="display: none">Cancel
                                        </button>
                                        <br>
                                        <button class="control_panel_btn" id="sokoban_reset"
                                                onclick="mcts_sokobanGame.init(JSON.parse(JSON.stringify(mcts_board)))">
                                            Reset
                                        </button>
                                    </div>

                                    <div>
                                        <br>
                                        Run MCTS for:
                                        <br>
                                        <input id="soko_mcts_tree_vis_mcts_timeout_slider" type="range" min="100"
                                               max="2000" value="1000" step="100"/>
                                        <br>
                                        <span id="soko_mcts_tree_vis_mcts_timeout_span"><b>1000</b></span> iterations
                                    </div>

                                </div>


                                <p id="mcts-sokobangame_reset">
                                    Clear! Step Used: <span id="mcts-sokobangame_step"></span>
                                    <button onclick="mcts_sokobanGame.init()">Reset</button>
                                </p>

                            </div>

                            <div class="interactive-ttt-right">
                                <div style="border: solid 1px lightgrey; height: 110px; display: flex;align-items: center; margin: 20px">
                                    <div style="float: left; height: 100%; width: auto; padding: 0.25em">
                                        <b>Current step</b>:
                                        <br>
                                        <span id="soko_mcts_current_action_count">(0/0)</span>
                                        <br>
                                        <br>
                                        <button id="soko_mcts_btn_next_action" disabled>Next step &gt;</button>
                                    </div>
                                    <div style="float: left; height: 100%; width: auto; padding: 0.25em;">
                                        <b>Current iteration</b>:
                                        <br>
                                        <span id="soko_mcts_current_iteration_count">(0/0)</span>
                                        <br>
                                        <br>
                                        <button id="soko_mcts_btn_next_iteration" disabled>Next iteration &gt;&gt;
                                        </button>
                                    </div>

                                    <div style="display: flex;float: left; height: 100%; width: auto; align-items: center; margin: 10px">
                                        <button style="width: 200px; height: 80%; margin: 10px; font-size: large"
                                                id="soko_mcts_btn_last_step" disabled>
                                            Visualize last step &gt;&gt;&gt;
                                        </button>
                                        <br>
                                        <button style="width: 150px; height: 80%; margin: 10px; font-size: larger"
                                                id="soko_mcts_btn_make_play" disabled>
                                            Make play
                                        </button>
                                    </div>

                                    <span id="soko_mcts_current_action_kind" style="font-size: larger">---</span>


                                </div>
                                <div id="soko_mcts_tree_vis" class="tree_vis"></div>
                            </div>
                        </div>

                    </div>

                    <div class="caption"><b>Figure 10:</b><br> MCTS solves puzzle game.
                    </div>
                </div>
            </div>

        </section>

        <!--        <section id="design-yourself">-->
        <!--            <h2>Design by your self MCTS</h2>-->

        <!--            <div class="framed">-->
        <!--                <div class="inside">-->
        <!--                    <div class="eyebrow">-->
        <!--                        Sokoban: MCTS can be used to solve Sokoban. Sokoban is a puzzle game.-->
        <!--                    </div>-->

        <!--                    <div>-->
        <!--                        <script type="module" src="./sokoban/tree_viz_sokoban.js"></script>-->
        <!--&lt;!&ndash;                        <script type="module" src="./sokoban/SokobanGameMapEditor.js"></script>&ndash;&gt;-->
        <!--                        <script type="module">-->
        <!--                            import {vis_sokoban} from "./sokoban/tree_viz_sokoban.js";-->
        <!--                            import SokobanGame from "./sokoban/SokobanGame.js";-->
        <!--                            import SokobanMapEditor, {sketch_sokoban_editor} from "./sokoban/SokobanGameMapEditor.js"-->

        <!--                            window.mcts_sokoban_editor = new p5(sketch_sokoban_editor, "editor")-->
        <!--                            window.mcts_sokobanGame_editor = new SokobanGame("editor-")-->
        <!--                            window.soko_mcts_tree_vis_p5_editor = new p5(vis_sokoban, "soko_mcts_tree_vis_editor");-->
        <!--                            window.soko_mcts_interactive_editor = new SokobanInteractive(soko_mcts_tree_vis_p5_editor, "editor", mcts_sokobanGame_editor)-->
        <!--                            window.soko_mcts_interactive_editor.setupInteractive()-->
        <!--                            mcts_sokobanGame_editor.init()-->
        <!--                            window.sokoban_editor_manager = new SokobanMapEditor(mcts_sokobanGame_editor, mcts_sokoban_editor)-->
        <!--                            // console.log(document.getElementById("soko_size"))-->

        <!--                            // window.mcts_sokoban_editor.changeSize(document.getElementById("soko_size").valueAsNumber, document.getElementById("soko_size").valueAsNumber)-->
        <!--                            document.getElementById("soko_size").addEventListener('input', () => {-->
        <!--                                let size = document.getElementById("soko_size").value-->
        <!--                                document.getElementById("soko_size_text").innerText = size-->
        <!--                                mcts_sokoban_editor.changeSize(parseInt(size), parseInt(size))-->
        <!--                            })-->
        <!--                            // sokoban_editor_manager.synthBoard()-->

        <!--                            const sleep = (delay) => new Promise((resolve) => setTimeout(resolve, delay));-->

        <!--                            // console.info("lalala2")-->


        <!--                        </script>-->

        <!--                        <div>-->
        <!--                            <div id="editor"-->
        <!--                                 style="display: flex; flex-direction: row;width: 100%; border: solid 1px black;border-radius: 10px;justify-content: center; align-items: center;">-->
        <!--&lt;!&ndash;                                                    关卡编辑器&ndash;&gt;-->
        <!--                                <div id="editor_eee"-->
        <!--                                     style="display: flex; flex-direction: column; width: fit-content; border-radius: 10px;align-items: center;">-->
        <!--                                    Map Editor-->
        <!--                                    <div>-->
        <!--                                        <input id="soko_size" type="range" min="5" max="20" value="10" step="1"/>-->

        <!--                                        Grid Size:<span id="soko_size_text"><b>10</b></span>-->
        <!--                                    </div>-->

        <!--                                    <button onclick="sokoban_editor_manager.synthBoard()">Syn Board</button>-->
        <!--                                    <button onclick="sokoban_editor_manager.clearBoard()">Clear Board</button>-->
        <!--                                </div>-->
        <!--                                &lt;!&ndash;                    文本编辑器&ndash;&gt;-->
        <!--&lt;!&ndash;                                <div style="display: flex; flex-direction: column; width: fit-content; border-radius: 10px; padding: 10px; align-items: center">&ndash;&gt;-->
        <!--&lt;!&ndash;                                    Text Editor&ndash;&gt;-->
        <!--&lt;!&ndash;                                    <div id="container" style="width: 630px ;height:600px;border:1px solid grey"></div>&ndash;&gt;-->

        <!--&lt;!&ndash;                                    <script src="./node_modules/monaco-editor/min/vs/loader.js"></script>&ndash;&gt;-->
        <!--&lt;!&ndash;                                    <script>&ndash;&gt;-->

        <!--&lt;!&ndash;                                        function loadScript(url, callback) {&ndash;&gt;-->
        <!--&lt;!&ndash;                                            const xhr = new XMLHttpRequest();&ndash;&gt;-->
        <!--&lt;!&ndash;                                            xhr.open('GET', url);&ndash;&gt;-->
        <!--&lt;!&ndash;                                            xhr.onload = () => {&ndash;&gt;-->
        <!--&lt;!&ndash;                                                if (xhr.status === 200) {&ndash;&gt;-->
        <!--&lt;!&ndash;                                                    if (callback) callback(xhr.responseText);&ndash;&gt;-->
        <!--&lt;!&ndash;                                                }&ndash;&gt;-->
        <!--&lt;!&ndash;                                            };&ndash;&gt;-->
        <!--&lt;!&ndash;                                            xhr.send();&ndash;&gt;-->
        <!--&lt;!&ndash;                                        }&ndash;&gt;-->

        <!--&lt;!&ndash;                                        require.config({paths: {vs: './node_modules/monaco-editor/min/vs'}});&ndash;&gt;-->
        <!--&lt;!&ndash;                                        require(['vs/editor/editor.main'], function () {&ndash;&gt;-->
        <!--&lt;!&ndash;                                            window.editor = monaco.editor.create(document.getElementById('container'), {&ndash;&gt;-->
        <!--&lt;!&ndash;                                                value: ['function x() {', '\tconsole.log("Hello world!");', '}'].join('\n'),&ndash;&gt;-->
        <!--&lt;!&ndash;                                                language: 'javascript'&ndash;&gt;-->
        <!--&lt;!&ndash;                                            })&ndash;&gt;-->

        <!--&lt;!&ndash;                                            loadScript("./mcts-viz/lib/mcts-template.js", (text) => {&ndash;&gt;-->
        <!--&lt;!&ndash;                                                window.editor.setValue(text)&ndash;&gt;-->
        <!--&lt;!&ndash;                                                eval(editor.getValue())&ndash;&gt;-->
        <!--&lt;!&ndash;                                            })&ndash;&gt;-->
        <!--&lt;!&ndash;                                        });&ndash;&gt;-->


        <!--&lt;!&ndash;                                        window.play = () => {&ndash;&gt;-->
        <!--&lt;!&ndash;                                            eval(editor.getValue())&ndash;&gt;-->
        <!--&lt;!&ndash;                                            window.alert("Script Loaded!")&ndash;&gt;-->
        <!--&lt;!&ndash;                                        }&ndash;&gt;-->
        <!--&lt;!&ndash;                                    </script>&ndash;&gt;-->

        <!--&lt;!&ndash;                                    <button onclick="play()">Load Script</button>&ndash;&gt;-->
        <!--&lt;!&ndash;                                </div>&ndash;&gt;-->


        <!--                            </div>-->


        <!--                            <br>-->

        <!--                        </div>-->

        <!--                        <div class="four_procedure">-->
        <!--                            <div id="editor-sokobangamediv" class="interactive-ttt-left">-->
        <!--                                <p>Game: <b>Sokoban</b></p>-->

        <!--                                <p id="editor-sokobangame"></p>-->

        <!--                                <div id="editor-p5_game"></div>-->

        <!--                                <p id="editor-sokobangame_reset">-->
        <!--                                    Clear! Step Used: <span id="editor-sokobangame_step"></span>-->
        <!--                                    <button onclick="mcts_sokobanGame_editor.init()">Reset</button>-->
        <!--                                </p>-->


        <!--                                <div id="editor-sokobangame_machine_controls_area">-->
        <!--                                    <b class="modified_text">AI controls:</b>-->
        <!--                                    <div style="background-color: rgb(230, 230, 230); padding: 1em">-->
        <!--                                        <button onclick="mcts_sokobanGame_editor.machineRandomMove()">Make random move-->
        <!--                                        </button>-->
        <!--                                        <br>-->
        <!--                                        <button onclick="mcts_sokobanGame_editor.machineMctsMoveWithMyMCTS(soko_mcts_interactive_editor, MyMCTS)">-->
        <!--                                            Make-->
        <!--                                            MCTS move-->
        <!--                                        </button>-->
        <!--                                        <br>-->
        <!--                                        <button onclick="mcts_sokobanGame_editor.autoPlay(soko_mcts_interactive_editor)">-->
        <!--                                            Auto Play-->
        <!--                                        </button>-->
        <!--                                        <br>-->
        <!--                                        Run MCTS for:-->
        <!--                                        <br>-->
        <!--                                        <input id="soko_mcts_tree_vis_editor_mcts_timeout_slider" type="range" min="1000"-->
        <!--                                               max="20000" value="10000" step="100"/>-->
        <!--                                        <br>-->
        <!--                                        <span id="soko_mcts_tree_vis_editor_mcts_timeout_span"><b>1</b></span>-->
        <!--                                        iterations-->
        <!--                                    </div>-->
        <!--                                </div>-->
        <!--                            </div>-->

        <!--                            <div class="interactive-ttt-right">-->
        <!--                                <div style="border: solid 1px lightgrey; height: 110px">-->
        <!--                                    <div style="float: left; height: 100%; width: auto; padding: 0.25em">-->
        <!--                                        <b>Current step</b>:-->
        <!--                                        <br>-->
        <!--                                        <span id="editor_current_action_count">(0/0)</span>-->
        <!--                                        <br>-->
        <!--                                        <span id="editor_current_action_kind">-&#45;&#45;</span>-->
        <!--                                        <br>-->
        <!--                                        <button id="editor_btn_next_action" disabled>next step &gt;</button>-->
        <!--                                    </div>-->
        <!--                                    <div style="float: left; height: 100%; width: auto; padding: 0.25em;">-->
        <!--                                        <b>Current iteration</b>:-->
        <!--                                        <br>-->
        <!--                                        <span id="editor_current_iteration_count">(0/0)</span>-->
        <!--                                        <br>-->
        <!--                                        <br>-->
        <!--                                        <button id="editor_btn_next_iteration" disabled>next iteration &gt;&gt;-->
        <!--                                        </button>-->
        <!--                                    </div>-->
        <!--                                    <div style="float: left; height: 100%; width: auto; margin-top: 0.2em; margin-bottom: 0.2em;">-->
        <!--                                        <button style="width: 200px; height: 45%; margin-bottom: 0.2em;"-->
        <!--                                                id="editor_btn_last_step" disabled>visualize last step &gt;&gt;&gt;-->
        <!--                                        </button>-->
        <!--                                        <br>-->
        <!--                                        <button style="width: 200px; height: 45%;" id="editor_btn_make_play"-->
        <!--                                                disabled>make play-->
        <!--                                        </button>-->
        <!--                                    </div>-->
        <!--                                </div>-->
        <!--                                <div id="soko_mcts_tree_vis_editor" class="tree_vis"></div>-->
        <!--                            </div>-->
        <!--                        </div>-->

        <!--                    </div>-->

        <!--                    <div class="caption"><b>Figure 10:</b><br> Machine/MCTS solves puzzle game.-->
        <!--                    </div>-->
        <!--                </div>-->

        <!--            </div>-->


        <!--        </section>-->


        <section id="conclusion">
            <h2>Conclusion</h2>
            <p>
                As a summary, this paper provides a comprehensive explanation of the basic procedure of MCTS. Four main
                components, Selection, Expansion, Simulation, Backpropagation are described in detail. To fully
                demonstrate
                the workflow of MCTS in different cases, two classic games, Tic-Tac-Toe and Sokoban are used.
                Additionally,
                several selection strategies are discussed in the immersive part.
                <span class="modified_text"> MCTS has been successfully applied to game AI areas such as Go and video games. Beyond
                    these game-based environments, MCTS also presents its potential abilities in black-box optimisation [<a
                            href="#wang2020learning">7</a>],
                    robotics [<a href="#best2019dec">8</a>] and real-world scheduling problems [<a
                            href="#li2021effective">9</a>]. </span>
                More details about MCTS and its ingredients can be found in
                [<a href="#browne2012survey">1</a>,<a href="#silver2017mastering">2</a>].

            </p>
        </section>

        <section class="references">
            <h2>References</h2>
            <ol>

                <li id="browne2012survey">
                    A survey of monte carlo tree search methods
                    <span>
                        Browne, C.B., Powley, E., Whitehouse, D., Lucas, S.M., Cowling, P.I., Rohlfshagen, P., Tavener, S., Perez, D., Samothrakis, S. and Colton, S., 2012. IEEE Transactions on Computational Intelligence and AI in Games, vol. 4(1), pp. 1--43. IEEE.
                    </span>
                </li>

                <li id="segler2018planning">
                    Mastering the game of Go without human knowledge
                    <span>
                        Silver, D., Schrittwieser, J., Simonyan, K., Antonoglou, I., Huang, A., Guez, A., Hubert, T., Baker, L., Lai, M., Bolton, A., Chen, Y., Lillicrap, T., Hui, F., Sifre, L., Diessche, G.v.d., Graepel, T. and Hassabis, D., 2017. Nature, vol. 550(7676), pp. 354--359. Nature Publishing Group.
                    </span>
                </li>

                <li id="perez2016general">
                    General video game AI: Competition, challenges and opportunities
                    <span>
                        Perez-Liebana, D., Samothrakis, S., Togelius, J., Schaul, T. and Lucas, S.M., 2016. Thirtieth AAAI Conference on Artificial Intelligence, pp. 1--3.
                    </span>
                </li>

                <li id="silver2017mastering">
                    Planning chemical syntheses with deep neural networks and symbolic AI
                    <span>
                        Segler, M.H., Preuss, M. and Waller, M.P., 2018. Nature, vol. 555(7698), pp. 604--610. Nature Publishing Group.
                    </span>
                </li>

                <li id="kocsis2006bandit">
                    Bandit based Monte-carlo planning
                    <span>
                        Kocsis, L. and Szepesvari, C., 2006. European conference on Machine Learning, pp. 282--293.
                    </span>
                </li>

                <li id="mcts-viz">
                    Visualization of MCTS algorithm applied to Tic-tac-toe
                    <span>
                        vgarciasc.
                      <a href="https://github.com/vgarciasc/mcts-viz/"
                         target="_blank">https://github.com/vgarciasc/mcts-viz/</a>
                    </span>
                </li>

                <li id="wang2020learning">
                    Learning search space partition for black-box optimization using monte carlo tree search
                    <span>
                        Wang, Linnan and Fonseca, Rodrigo and Tian, Yuandong, 2020. Advances in Neural Information Processing Systems, vol. 33, pp. 19511--19522
                    </span>
                </li>

                <li id="best2019dec">
                    Dec-MCTS: Decentralized planning for multi-robot active perception
                    <span>
                        Best, Graeme and Cliff, Oliver M and Patten, Timothy and Mettu, Ramgopal R and Fitch, Robert, 2019. The International Journal of Robotics Research, vol. 38, no. 2-3, pp. 316-337.
                    </span>
                </li>

                <li id="li2021effective">
                    An effective MCTS-based algorithm for minimizing makespan in dynamic flexible job shop scheduling
                    problem
                    <span>
                        Li, Kexin and Deng, Qianwang and Zhang, Like and Fan, Qing and Gong, Guiliang and Ding, Sun, 2021. Computers & Industrial Engineering, vol. 155, pp. 10721.
                    </span>
                </li>

            </ol>
        </section>

        <script>

            pseudocode.renderElement(document.getElementById("selection_pseudo"),
                {
                    lineNumber: false,
                    noEnd: true
                })

            pseudocode.renderElement(document.getElementById("expansion_pseudo"),
                {
                    lineNumber: false,
                    noEnd: true
                })

            pseudocode.renderElement(document.getElementById("simulation_pseudo"),
                {
                    lineNumber: false,
                    noEnd: true
                })

            pseudocode.renderElement(document.getElementById("back_pseudo"),
                {
                    lineNumber: false,
                    noEnd: true
                })

            pseudocode.renderElement(document.getElementById("mcts_pseudo"),
                {
                    lineNumber: false,
                    noEnd: true
                })
        </script>

    </div>

</article><!-- End of aticle -->

<!-- Scroll to top button -->
<a class="scroll-top" href="#">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 312.36">
        <path fill="white"
              d="M0 276.77 253.12 0 512 282.48l-32.65 29.88-226.2-246.83L32.66 306.64z"/>
    </svg>
</a>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        let scrollTopBtn = document.querySelector(".scroll-top");
        window.onscroll = function () {
            scrollFunction(scrollTopBtn)
        };

        function scrollFunction(el) {
            if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
                el.style.display = "flex";
            } else {
                el.style.display = "none";
            }
        }
    });
</script>
</body>

</html>
