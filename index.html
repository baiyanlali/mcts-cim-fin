<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags for IEEE Xplore immersive article -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description"
          content="An interactive article on using genetic algorithms to solve the 8-Queens problem. Learn how the choice of representation and operators affects your genetic algorithm.">
    <meta charset="utf8">
    <title>Playing with Monte-Carlo Tree Search
    </title>

    <!-- Stylesheet for IEEE Xplore immersive article -->
    <link rel="stylesheet" href="fonts/stylesheet.css">
    <link rel="stylesheet" href="css/style.css">

    <!-- MathJax javascript library and implementation file/s -->
    <script type="text/javascript" async
            src="https://xploreqa.ieee.org/xploreAssets/MathJax-274/MathJax.js?config=default">
    </script>

    <!-- Example chessboard immersive app -->
    <script type="text/javascript" src="./jquery-3.5.1.js"></script>


    <script src="./p5.min.js"></script>
    <script src="./tween.umd.js"></script>

    <script src="./mcts-viz/draw_tree.js"></script>
    <script src="./mcts-viz/lib/tree.js"></script>
    <script src="./mcts-viz/interactive.js"></script>
    <script type="module" src="./mcts-viz/tree_vis.js"></script>
    <script src="./mcts-viz/lib/tictactoe.js"></script>
    <script src="./mcts-viz/lib/mcts.js"></script>
    <script src="./mcts-viz/sketch.js"></script>
    <script src="./sokoban/SokobanRepresentation.js"></script>
    <script src="./mcts-viz/TTTRepresentation.js"></script>

    <link rel="stylesheet" href="./katex.min.css">
    <script src="./katex.min.js"></script>

    <script defer src="./auto-render.min.js" onload="renderMathInElement(document.body);"></script>

    <script src="./pseudocode.min.js" type="text/javascript"></script>


    <link rel="stylesheet" type="text/css" href="interactive.css">
    <link rel="stylesheet" type="text/css" href="pseudocode.min.css">

    <script type="text/json">
    {
      "katex":{
        "delimiters":[
          {"left": "$$", "right": "$$", "display": true},
          {"left": "$", "right": "$", "display": false}
        ]
      }
    }





    </script>

</head>

<body>
<!-- Article with large top spacing -->
<article class="mt-lg">
    <header>
        <!-- Page container -->
        <div class="container">
            <!-- Page title -->
            <h1>
                Playing with Monte-Carlo Tree Search
            </h1>
            <!-- Subheading -->
            <p class="subhead">
                An interactive article providing an accessible explanation of how Monte-Carlo Tree Search (MCTS) works.
                Tic-Tac-Toe and Sokoban will be provided to show the procedure of MCTS.
            </p>
            <!-- Header info general wrapper -->
            <div class="header-info">
                <!-- Header left info box -->
                <div class="header-left box">
                    <!-- Header authors section -->
                    <div class="header-authors">
                        <h2>Authors</h2>
                        <ul>
                            <li>YunLong Zhao | Southern University of Science and Technology</li>
                            <li>Chengpeng Hu | Southern University of Science and Technology</li>
                            <li>Jialin Liu | Southern University of Science and Technology</li>
                        </ul>
                    </div>
                    <!-- Published info section -->
                    <div class="header-published">
                        <h2>Published</h2>
                        <p>Dec. 1, 2023</p>
                    </div>
                </div>
                <!-- Header legend section -->
                <div class="header-legend">
                    <svg class="click-icon" data-name="Click"
                         xmlns="http://www.w3.org/2000/svg" viewBox="0 0 83.62 122.88">
                        <title>Click</title>
                        <path
                                d="M40.59,14.63a3.36,3.36,0,0,1-1,2.39l0,0a3.39,3.39,0,0,1-4.77,0,3.42,3.42,0,0,1-1-2.4V3.39A3.4,3.4,0,0,1,37.2,0a3.34,3.34,0,0,1,2.39,1,3.39,3.39,0,0,1,1,2.4V14.63Zm25,76.65a1.89,1.89,0,0,1,3.77,0V99.9a1.89,1.89,0,1,1-3.77,0V91.28ZM54.46,87.47a1.89,1.89,0,0,1,3.77,0V99.9a1.89,1.89,0,1,1-3.77,0V87.47Zm-28-7.63a1.92,1.92,0,0,1-.35-.23q-5.24-4.24-10.44-8.53a8.36,8.36,0,0,0-3.57-1.79,3.54,3.54,0,0,0-2,.09A2,2,0,0,0,9,70.49a6.9,6.9,0,0,0-.4,3.24,12.47,12.47,0,0,0,1.11,4,26.49,26.49,0,0,0,2.92,4.94l17.68,26.74a2.37,2.37,0,0,1,.36,1,15.28,15.28,0,0,0,1.87,6.4,2.89,2.89,0,0,0,2.57,1.46c9,0,18.62-.34,27.53,0a8.33,8.33,0,0,0,4.69-1.51,15,15,0,0,0,4.29-5l.34-.57c3.4-5.87,6.71-11.57,7-18.33L78.85,85l0-.33,0-1.84c.06-5.74.16-14.54-4.62-15.4H71.14c.09,2.46,0,5-.18,7.3-.08,1.36-.15,2.63-.15,3.79a2.31,2.31,0,1,1-4.62,0c0-1.1.08-2.52.17-4,.32-5.73.75-13.38-3.24-14.14h-3a2.2,2.2,0,0,1-.58-.07,69.07,69.07,0,0,1-.13,8.29c-.07,1.36-.15,2.63-.15,3.79a2.31,2.31,0,1,1-4.61,0c0-1.1.08-2.52.16-4,.33-5.73.76-13.38-3.24-14.14h-3a2,2,0,0,1-.6-.08V66a2.31,2.31,0,1,1-4.61,0V42c0-4-1.64-6.55-3.73-7.61a5.32,5.32,0,0,0-4.71-.06l-.1.06c-2.07,1-3.69,3.59-3.69,7.7v42a2.31,2.31,0,1,1-4.62,0V79.84Zm44.14-17a2.49,2.49,0,0,1,.61-.08h3.19a2.33,2.33,0,0,1,.53.06c8.73,1.4,8.61,12.65,8.52,20,0,3.4.14,6.78.18,10.17-.39,7.91-4,14.1-7.67,20.47l-.32.55A19.49,19.49,0,0,1,70,120.55a12.88,12.88,0,0,1-7.29,2.32H35.17a7.23,7.23,0,0,1-6.44-3.5,19,19,0,0,1-2.56-7.88L8.94,85.42A31,31,0,0,1,5.5,79.58,16.88,16.88,0,0,1,4,74a11.42,11.42,0,0,1,.8-5.42,6.54,6.54,0,0,1,3.55-3.49A8.05,8.05,0,0,1,13,64.76a13.19,13.19,0,0,1,5.61,2.77L26.45,74V42.09c0-6.1,2.73-10,6.22-11.82l.15-.06a9.81,9.81,0,0,1,4.33-1,10,10,0,0,1,4.49,1.07C45.16,32.06,47.91,36,47.91,42v7.6a2.41,2.41,0,0,1,.6-.08H51.7a2.33,2.33,0,0,1,.53.06c3.82.61,5.73,3.16,6.63,6.47a2.25,2.25,0,0,1,1.23-.36h3.18a2.26,2.26,0,0,1,.53.06c4.07.65,6,3.49,6.79,7.11ZM14.63,37A3.33,3.33,0,0,1,17,38a3.39,3.39,0,0,1-2.39,5.79H3.39a3.36,3.36,0,0,1-2.39-1A3.4,3.4,0,0,1,3.39,37ZM23,20.55a3.39,3.39,0,0,1-2.4,5.79,3.4,3.4,0,0,1-2.4-1l-7.91-7.94a3.42,3.42,0,0,1-1-2.4,3.39,3.39,0,0,1,5.79-2.4L23,20.55ZM59.2,43.81a3.41,3.41,0,0,1-3.4-3.4A3.41,3.41,0,0,1,59.2,37H70.43a3.35,3.35,0,0,1,2.4,1,3.4,3.4,0,0,1-2.4,5.79ZM55.62,24.74a3.39,3.39,0,0,1-4.8-4.8l7.91-8a3.39,3.39,0,0,1,4.8,4.8l-7.91,8Z"/>
                    </svg>
                    <p>Indicates interactive elements</p>
                </div>
            </div>
            <!-- Box of anchored links -->
            <div class="contents box">
                <h2>Contents:</h2>
                <ul>
                    <li>
                        <a href="#introduction">Introduction</a>
                        <span class="separator">&nbsp;&nbsp;|&nbsp;&nbsp;</span>
                    </li>
                    <li>
                        <a href="#games">Games</a>
                        <span class="separator">&nbsp;&nbsp;|&nbsp;&nbsp;</span>
                    </li>
                    <li>
                        <a href="#algorithm">Algorithm</a>
                        <span class="separator">&nbsp;&nbsp;|&nbsp;&nbsp;</span>
                    </li>
                    <li>
                        <a href="#practice">Practise</a>
                        <span class="separator">&nbsp;&nbsp;|&nbsp;&nbsp;</span>
                    </li>
                    <li>
                        <a href="#conclusion">Conclusion</a>
                    </li>
                </ul>
            </div>
        </div>
    </header>

    <!-- Content container with large top spacing -->
    <div class="container mt-lg">
        <!-- Anchor ID -->
        <section id="introduction">
            <!-- Section title -->
            <h2>I. Introduction</h2>
            <p>
                Monte-Carlo Tree Search (MCTS) is a tree-based policy that aims to achieve optimal performance in
                solving sequential decision problems[<a href="#browne2012survey">7</a>].
                By utilizing random sampling, a game tree is constructed to identify the optimal action at each state.
                Because of few low requirements for domain knowledge and its simplicity, MCTS has achieved significant
                success in various domains, such as Go[<a href="#silver2017mastering">7</a>], video games[<a
                    href="#perez2016general">7</a>], and chemical synthesis[<a href="#segler2018planning">7</a>].
            </p>
            <p>
                MCTS combines the concepts of tree search and reinforcement learning to address situations where local
                optimal actions may not lead to global optimal performance.
                The four core components of MCTS are <i>Selection</i>, <i>Expansion</i>, <i>Simulation</i>, and <i>Backpropagation</i>.
                The basic procedure of MCTS involves building a tree with nodes that represent visited states and
                selecting the node with the highest probability of reaching an optimal outcome.
                The selected node is then expanded according to the available action space.
                Once a simulation, starting from the expanded node, terminates, the results of the simulation are
                propagated back to update the statistics of the nodes on the trajectory.
                MCTS addresses the exploration-exploitation dilemma with specific selection strategies, such as the
                upper confidence bound (UCB)
                [<a href="#kocsis2006bandit">7</a>]
                , that balance exploitation and exploration within a given computational budget.
            </p>

            <p>
                In this paper, we introduce the underlying mechanism of MCTS and provide corresponding immersive
                interaction for two representative games: Tic-Tac-Toe, a two-player competitive game and Sokoban, a
                single-player puzzle game. The paper is organised as follows. Section <a href="#games">Games</a>
                introduces the Tic-Tac-Tow and Sokoban, Section <a href="#algorithm">Algorithm</a> provides the details
                of the MCTS algorithm, Section <a href="#practise">Practise</a> gives an interactive environment for
                experimenting MCTS , Section <a href="#conclusion">Conclusion</a> concludes the paper.
            </p>

        </section>

        <section id="games">
            <h2>II. Games</h2>


            <p>
                A classic two-player board game, Tic-Tac-Toe, and a single-player video game, Sokoban, are used as
                illustrative examples. Figure 1 shows screenshots of the two games.
            </p>

            <div class="l-body" style="width: 100%;">
                <div class="l-body" style="width: 100%; display: flex">
                    <img src="image/ttt.png" alt="Tic-Tac-Toe Game."
                         style="margin: auto auto; width: 30%; display: block"/>
                    <img src="image/sokoban.png" alt="Sokoban Game."
                         style="margin: auto auto; width: 30%; display: block"/>
                </div>
                <div class="caption" style="width: 100%; display: block"><b>Figure 1:</b><br> Tic-Tac-Toe (left) and
                    Sokoban (right)
                </div>
            </div>


            <ul>
                <li>
                    Tic-Tac-Toe is a two-player competitive board game. Players take turns drawing their own marker
                    (usually X or O) on a $3\times3$ grid board, as presented in Figure 1 (left). A player wins once
                    three placed markers can be connected together vertically, horizontally, or diagonally. But if all
                    squares are filled but neither player has won, the game ends in a draw.
                </li>
                <li>
                    Sokoban is a classic video game in which a player must strategically push boxes to their designated
                    positions in order to win. The game is set on a fixed board made up of different tiles, as
                    demonstrated in Figure 1 (right). The player can move through empty spaces and push boxes onto
                    spaces without obstacles such as walls and other fixed boxes.
                </li>
            </ul>


            <h3>Modelling</h3>


            <p>
                MCTS is typically used to solve sequential decision problems, which are often formulated as a Markov
                decision process (MDP). The four components of an MDP are state $S$, action $A$, transition model $P$
                and reward $R$. An MCTS policy $\pi$ takes an action in a given state s, then obtains a reward $R$ and
                the next state of the environments according to the transition model. The policy is expected to optimise
                the policy and maximise the long-term expected reward. For example, in Tic-Tac-Toe as shown in Figure 1
                (left), the game board is the state of the game, represented as nodes in the game tree, and the marker
                placed by a player is considered an action taken by that player.
            </p>

            <p>
                The interactive interface is based on[<a href="#mcts-viz">7</a>]. The game interfaces and data
                representations of Tic-Tac-Toe and Sokoban are presented below. You can
                activate either game by hovering your mouse pointer over its corresponding image. Detailed gameplay
                instructions for each game are included in its description.
            </p>

            <p>In Tic-Tac-Toe, the game state is represented as a $3 \times 3$ grid.</p>

            <div class="framed">

                <script>
                    let myp5 = new p5(s, "show");

                    //common usage in game mod in order to change a function behaviour.
                    let ori_state_trans = myp5.stateTransition

                    const sleep = (delay) => new Promise((resolve) => setTimeout(resolve, delay))

                    myp5.stateTransition = async s => {
                        await ori_state_trans(s)
                        if (s === GameStates.WAITING_MACHINE_MOVE) {
                            myp5.whoseTurn = PLAYER.MACHINE;
                            myp5.whoseturnArea.show();
                            myp5.whoseTurnSpan.html(myp5.whoseTurn === PLAYER.HUMAN ? "HUMAN" : "MACHINE");
                            myp5.machineControlsArea.hide()
                            await sleep(500)
                            myp5.machineMctsMove()
                        }
                    }

                    const ttt_repre = new p5(ttt_representation, "ttt_repre")

                    myp5.onMakeMove = (s) => {
                        ttt_repre.board = s.TTT_BOARD.grid
                    }

                    let after_setup = async () => {
                        await sleep(1000)
                        ttt_repre.board = myp5.TTT_BOARD
                        ttt_repre.drawBoard()
                    }

                    // after_setup()


                </script>

                <div class="inside">
                    <div class="eyebrow">
                        An introduction to the Tic-Tac-Toe game and its representation.
                    </div>

                    <div class="interactive"
                         style="position: relative; width: fit-content; margin-bottom: 20px; border: solid 1px black; padding: 1em; left: 50%; transform: translate(-50%, 0)">

                        Game: <b>Tic-Tac-Toe</b>
                        <div>
                            <p id="show_starting_player_area">
                                <b>Who will play first?</b>
                                <br>
                                <button onclick="myp5.selectStartingPlayer(0)">HUMAN (You!)</button>
                                <br>
                                <button onclick="myp5.selectStartingPlayer(1)">MACHINE</button>
                            </p>

                            <p id="show_whoseturn_area">
                                <b>Whose turn?</b> <span id="show_whoseturn">HUMAN</span>
                            </p>

                            <div id="show_game_over_area">
                                <b>The winner is...</b> <span id="show_game_over_winner">HUMAN</span>!
                                <br>
                                <button onclick="myp5.reset()">Restart game</button>
                            </div>

                            <div id="show_machine_controls_area" style="display: none">
                                <b>Machine controls:</b>
                                <div style="background-color: rgb(230, 230, 230); padding: 1em">
                                    <button onclick="myp5.machineRandomMove()">Make random move</button>
                                    <br>
                                    <button onclick="myp5.machineMctsMove()">Make MCTS move</button>
                                    <br>
                                    <button onclick="myp5.machineGreedyMove()">Make Greedy move</button>
                                    <br>
                                    Run MCTS for:
                                    <br>
                                    <input id="show_mcts_timeout_slider" type="range" min="10" max="2000" value="1000"
                                           step="10"/>
                                    <br>
                                    <span id="show_mcts_timeout_span"><b>1</b></span> iterations
                                </div>
                            </div>

                        </div>

                        <div style="display: flex;">
                            <div id="show"></div>
                            <div id="ttt_repre" style="width: 180px; margin: auto"></div>
                        </div>

                    </div>


                    <div class="caption"><b>Figure 2:</b><br> Tic-Tac-Toe: You can select whether you want to play the
                        game as the first or second player by clicking the corresponding button above. The objective of
                        the game is to connect three of your pieces in a row, column, or diagonal. The right panel
                        presents the current state of the Tic-Tac-Toe game as a 3x3 matrix, where unoccupied cells are
                        symbolized by empty spaces. Your pieces and the ones of machine are denoted by "h" and "m",
                        respectively.
                    </div>
                </div>
            </div>

            <p>
                The Sokoban game is represented by an $n \times n$ matrix, where $n$ represents the size of the game
                board. The matrix uses 0, 1, 2, 3, and 5 to indicate empty spaces, walls, boxes, targets, and the
                player, respectively.
            </p>


            <div class="framed">

                <div class="inside">
                    <div class="eyebrow">
                        An introduction to the Sokoban game and its representation.
                    </div>

                    <div id="sokobangamediv" class="interactive"
                         style="position: relative; width:fit-content; margin-bottom: 20px; border: solid 1px black; padding: 1em; left: 50%; transform: translate(-50%, 0)">

                        <p>Game: <b>Sokoban</b></p>
                        <p id="sokobangame"></p>
                        <div style="display: flex">
                            <div id="p5_game"></div>
                            <div id="soko_repre" style="width: 200px"></div>
                        </div>


                        <p id="sokobangame_reset">

                            Clear! Step Used: <span id="sokobangame_step"></span>
                            <button onclick="sokobanGame.init()"> Reset</button>
                        </p>

                        <script type="module">
                            import SokobanGame from "./sokoban/SokobanGame.js";

                            const sokobanGame = new SokobanGame()
                            window.sokobanGame = sokobanGame
                            sokobanGame.init()

                            const soko_repre = new p5(sokoban_representation, "soko_repre")

                            let after_setup = async () => {
                                await sleep(1000)
                                soko_repre.board = sokobanGame.sokoban.board
                                soko_repre.drawBoard()
                            }

                            after_setup()


                            sokobanGame.onMakeAction = (s) => {
                                soko_repre.board = s.sokoban.board
                            }


                            window.randomMove = function () {
                                sokobanGame.machineRandomMove()
                            }

                            window.machineMctsMove = function () {
                                sokobanGame.machineMctsMove()
                            }

                        </script>
                    </div>


                    <div class="caption"><b>Figure 3:</b><br> To play, first move your mouse to the game panel and then
                        use the W, S, A, D, or arrow keys on your keyboard to move the character. The objective is to
                        push all the boxes to the green points (targets) to win the game.
                    </div>
                </div>
            </div>


        </section>


        <section id="algorithm">

            <h2>Algorithm</h2>

            <div class="l-body" style="width: 100%;">
                <img src="image/MCTS.png" alt="Main steps of MCTS."
                     style="margin: auto auto; width: 100%; display: block"/>
                <div class="caption" style="width: 100%; display: block"><b>Figure 4:</b><br> Main steps of MCTS (Figure
                    2 from [<a href="#browne2012survey">7</a>]
                    ). Nodes and branches represent state and action, respectively. Wins and visited time are usually
                    the values of a node.
                </div>
            </div>

            <p>
                The MCTS follows a workflow that illustrated in Figure 4. It involves four main components:
                <i>Selection</i>, <i>Expansion</i>, <i>Simulation</i>, and <i>Backpropagation</i>. The specific four
                steps will be discussed in detail in the subsequent sections. Interactive components are provided to
                demonstrate the four steps of MCTS intuitively.
            </p>


            <h3>Selection</h3>

            <p>
                Starting from the root node, which usually represents the current state, MCTS employs a traversal
                strategy to explore the tree and identify the final node that is expected to lead to an optimal
                solution, as estimated by the selection strategy. It is known as the "exploration-exploitation dilemma"
                that MCTS encounters. The dilemma considers a general problem of choosing actions that seems to be
                optimal at current state or taking a wide step to explore some unknown area to potentially discover
                better solutions. Three selection strategies are described as follows.
            </p>

            <ul>
                <li>A random strategy selects nodes randomly.</li>
                <li>$\epsilon$-greedy strategy selects nodes randomly with probability $\epsilon$. Otherwise, it chooses
                    the node that has the highest reward with probability $1- \epsilon$.
                </li>
                <li>Upper confidence bound (UCB)
                    [<a href="#kocsis2006bandit">7</a>]
                    measures the uncertainty of the expected reward of an action. The average rewards and visited times
                    of actions form the upper confidence bound, seeing Eq(1).
                </li>
            </ul>


            <p>
                $$ UCB = x_i +c\sqrt{\frac{\ln{n}}{n_i}} \qquad (1)$$
                where $x_i$ is the averaged reward of action $i$, $c$ is the exploration coefficient, $n$ is the total
                visited times and $n_i$ is the number of times that the action $i$ is selected.
                The node with the highest UCB value will be selected.
            </p>

            <p>
                UCB is the most commonly used selection strategy in MCTS, called as Upper Confidence Bound for Trees
                (UCT). It balances the exploration and exploitation by considering both reward and visited times of a
                node. $x_i$ estimates the current collected experience, e.g., the optimal action that has been taken,
                while $c\sqrt{\frac{\ln{n}}{n_i}}$ considers the frequency that a nodes is visited. The less frequently
                visited node has larger possibility to be chosen so that more unknown area will be explored. The
                coefficient $c$ controls the importance of exploration.
            </p>

            <p>
                The selection algorithm is shown below.
            </p>

            <pre id="selection_pseudo">
              \begin{algorithm}
              \caption{Selection}
              \begin{algorithmic}
              \PROCEDURE{Select}{$root$}
              \STATE Set $node$ $\gets$ $root$
              \WHILE {$node$ is not leaf and $node$ is not fully explored}
              \STATE $node$ $\gets$ Node with the highest UCB value(Eq.(1)) among $node.children$
              \ENDWHILE
              \STATE \Return $node$
              \ENDPROCEDURE
              \end{algorithmic}
              \end{algorithm}
            </pre>

            <p>You can try out the selection procedure in the interactive panel below.</p>

            <div class="framed">

                <div class="inside">
                    <div class="eyebrow">
                        Procedure of Selection.
                    </div>

                    <script type="module">
                        window.make_random_board = (interactive, p5, show_action) => {

                            interactive.reset()
                            interactive.have_board = true
                            p5.random_board(1)
                            p5.makeMctsMove(interactive)
                            let action = interactive.clickNextAction(show_action)
                            p5.current_action = document.getElementById(show_action + "_current_action")
                            console.log(show_action + "_current_action")
                            p5.current_action.textContent = action.kind
                            // selection_interactive.clickVisualizeLastStep()
                        }

                        window.next_show_action = (interactive, p5, show_action) => {
                            if (interactive.have_board === true) {
                                let action = interactive.nextUntil(show_action)
                                p5.current_action.textContent = action.kind
                            }
                        }

                        window.click_next_action = (interactive, p5) => {
                            if (interactive.have_board === true) {
                                let action = interactive.clickNextAction(true)
                                p5.current_action.textContent = action.kind
                            }
                        }
                    </script>


                    <div style="position: relative;">
                        <div style="position: relative; width:auto; margin-bottom: 20px; padding: 1em;">

                            <div class="interactive" style="position: absolute; width:fit-content; height: 550px; margin-bottom: 20px; border: solid 1px black; padding: 1em;">
                                <script type="module">
                                    import {vis} from "./mcts-viz/tree_vis.js"

                                    window.selection_p5 = new p5(s, "selection")

                                    selection_p5.mouseClicked = () => {
                                    }
                                    selection_p5.handleOver = () => {
                                    }

                                    window.selection_tree_vis_p5 = new p5(vis, "selection_tree_vis");
                                    window.selection_interactive = new TTTInteractive(selection_tree_vis_p5, "selection", selection_p5)
                                    selection_interactive.setupInteractive()
                                </script>
                                <div id="selection"></div>

                                <button style="position: relative; left: 50%; height: 10%; width: 80%; transform: translate(-50%)"
                                        onclick="make_random_board(selection_interactive, selection_p5, 'selection')">
                                    Make random board
                                </button>
                                <br>
                                <br>
                                <button style="position: relative; left: 50%; height: 10%; width: 80%; transform: translate(-50%)"
                                        onclick="next_show_action(selection_interactive, selection_p5, 'selection')">
                                    Next Selection
                                </button>
                                <br>
                                <br>
                                <button style="position: relative; left: 50%; height: 10%; width: 80%; transform: translate(-50%)"
                                        onclick="click_next_action(selection_interactive, selection_p5)">Next Step
                                </button>

                                <p id="selection_starting_player_area">
                                    <b style="display: none">Who will start the game?</b>
                                    <br>
                                    <button onclick="selection_p5.selectStartingPlayer(0)" style="display: none">HUMAN
                                        (You!)
                                    </button>
                                    <button onclick="selection_p5.selectStartingPlayer(1)" style="display: none">
                                        MACHINE
                                    </button>
                                </p>
                                <p id="selection_whoseturn_area">
                                    <b>Whose turn?</b> <span id="selection_whoseturn">HUMAN</span>
                                    <b>Current Action:</b> <span id="selection_current_action"></span>
                                </p>
                                <div id="selection_machine_controls_area">
                                    <b>Machine controls:</b>
                                    <div style="background-color: rgb(230, 230, 230); padding: 1em">
                                        <br>
                                        <button onclick="selection_p5.machineRandomMove()">Make random move</button>
                                        <br>
                                        <button onclick="selection_p5.machineMctsMove(selection_interactive)">Make MCTS
                                            move
                                        </button>
                                        <br>
                                        <button onclick="selection_p5.machineGreedyMove()">Make Greedy move</button>
                                        <br>

                                        <br>
                                        Run MCTS for:
                                        <br>
                                        <input id="selection_mcts_timeout_slider" type="range" min="10" max="2000"
                                               value="30" step="10"/>
                                        <br>
                                        <span id="selection_mcts_timeout_span"><b>1</b></span> iterations
                                    </div>
                                </div>
                                <div id="selection_game_over_area">
                                    <b>The winner is...</b> <span id="selection_game_over_winner">HUMAN</span>!
                                    <br>
                                    <button onclick="selection_p5.reset()">Restart game</button>
                                </div>

                            </div>

                            <div class="interactive" style="position: relative; width:fit-content; height: 550px ; margin-left: 250px; margin-bottom: 20px; border: solid 1px black; padding: 1em;">
                                <div style="border: solid 1px lightgrey; height: 110px; display: none">
                                    <div style="float: left; height: 100%; width: auto; padding: 0.25em;">
                                        <b>Current action</b>:
                                        <br>
                                        <span id="selection_current_action_count">(0/0)</span>
                                        <br>
                                        <span id="selection_current_action_kind">---</span>
                                        <br>
                                        <button id="selection_btn_next_action" disabled>next action &gt;</button>
                                    </div>
                                    <div style="float: left; height: 100%; width: auto; padding: 0.25em;">
                                        <b>Current iteration</b>:
                                        <br>
                                        <span id="selection_current_iteration_count">(0/0)</span>
                                        <br>
                                        <br>
                                        <button id="selection_btn_next_iteration" disabled>next iteration &gt;&gt;
                                        </button>
                                    </div>
                                    <div style="float: left; height: 100%; width: auto; margin-top: 0.2em; margin-bottom: 0.2em;">
                                        <button style="width: 200px; height: 45%; margin-bottom: 0.2em;"
                                                id="selection_btn_last_step" disabled>visualize last step &gt;&gt;&gt;
                                        </button>
                                        <br>
                                        <button style="width: 200px; height: 45%;" id="selection_btn_make_play"
                                                disabled>make play
                                        </button>
                                    </div>
                                </div>
                                <div id="selection_tree_vis"></div>
                            </div>
                        </div>
                    </div>


                    <div class="caption"><b>Figure 5:</b><br> By clicking the 'Make random board' button, you can
                        randomly generate a Tic-Tac-Toe game state.<br>
                        By clicking the 'Next Selection' button, you can automatically move to the next step in MCTS'
                        selection process.<br>
                        By clicking the 'Next Step' button, you can proceed to the next step in the current
                        selection.<br>
                        The node that is currently selected is highlighted with a red border.
                    </div>
                </div>
            </div>


        </section>


        <section class="references">
            <h2>References</h2>
            <ol>

                <li id="browne2012survey">
                    A survey of monte carlo tree search methods
                    <span>
                        Browne, C.B., Powley, E., Whitehouse, D., Lucas, S.M., Cowling, P.I., Rohlfshagen, P., Tavener, S., Perez, D., Samothrakis, S. and Colton, S., 2012. IEEE Transactions on Computational Intelligence and AI in Games, Vol 4(1), pp. 1--43. IEEE.
                    </span>
                </li>

                <li id="segler2018planning">
                    Mastering the game of Go without human knowledge
                    <span>
                        Silver, D., Schrittwieser, J., Simonyan, K., Antonoglou, I., Huang, A., Guez, A., Hubert, T., Baker, L., Lai, M., Bolton, A., Chen, Y., Lillicrap, T., Hui, F., Sifre, L., Diessche, G.v.d., Graepel, T. and Hassabis, D., 2017. Nature, Vol 550(7676), pp. 354--359. Nature Publishing Group.
                    </span>
                </li>

                <li id="perez2016general">
                    General video game AI: Competition, challenges and opportunities
                    <span>
                        Perez-Liebana, D., Samothrakis, S., Togelius, J., Schaul, T. and Lucas, S.M., 2016. Thirtieth AAAI Conference on Artificial Intelligence, pp. 1--3.
                    </span>
                </li>

                <li id="silver2017mastering">
                    Planning chemical syntheses with deep neural networks and symbolic AI
                    <span>
                        Segler, M.H., Preuss, M. and Waller, M.P., 2018. Nature, Vol 555(7698), pp. 604--610. Nature Publishing Group.
                    </span>
                </li>

                <li id="kocsis2006bandit">
                    Bandit based Monte-carlo planning
                    <span>
                        Kocsis, L. and Szepesvari, C., 2006. European conference on Machine Learning, pp. 282--293.
                    </span>
                </li>

                <li id="mcts-viz">
                    Visualization of MCTS algorithm applied to Tic-tac-toe
                    <span>
                      <a href="https://github.com/vgarciasc/mcts-viz/"
                         target="_blank">https://github.com/vgarciasc/mcts-viz/</a>
                    </span>
                </li>

            </ol>
        </section>

        <script>

            pseudocode.renderElement(document.getElementById("selection_pseudo"),
                {
                    lineNumber: false,
                    noEnd:true
                })

            pseudocode.renderElement(document.getElementById("expansion_pseudo"),
                {
                    lineNumber: false,
                    noEnd:true
                })

            pseudocode.renderElement(document.getElementById("simulation_pseudo"),
                {
                    lineNumber: false,
                    noEnd:true
                })

            pseudocode.renderElement(document.getElementById("back_pseudo"),
                {
                    lineNumber: false,
                    noEnd:true
                })

            pseudocode.renderElement(document.getElementById("mcts_pseudo"),
                {
                    lineNumber: false,
                    noEnd:true
                })
        </script>

    </div>

</article><!-- End of aticle -->

<!-- Scroll to top button -->
<a class="scroll-top" href="#">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 312.36">
        <path fill="white"
              d="M0 276.77 253.12 0 512 282.48l-32.65 29.88-226.2-246.83L32.66 306.64z"/>
    </svg>
</a>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        let scrollTopBtn = document.querySelector(".scroll-top");
        window.onscroll = function () {
            scrollFunction(scrollTopBtn)
        };

        function scrollFunction(el) {
            if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
                el.style.display = "flex";
            } else {
                el.style.display = "none";
            }
        }
    });
</script>
</body>

</html>
